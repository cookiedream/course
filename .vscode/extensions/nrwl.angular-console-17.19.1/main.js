(()=>{var e,t,n,r={16323:e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=16323,e.exports=t},83988:e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=83988,e.exports=t},13885:e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=13885,e.exports=t},87231:e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=87231,e.exports=t},3597:e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=3597,e.exports=t},9767:e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=9767,e.exports=t},30024:e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=30024,e.exports=t},83151:e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=83151,e.exports=t},61437:e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=61437,e.exports=t},17844:e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=17844,e.exports=t},72939:e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=72939,e.exports=t},26291:e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=26291,e.exports=t},18862:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.refreshWorkspace=t.REFRESH_WORKSPACE=void 0;const r=n(72872),o=n(89496);t.REFRESH_WORKSPACE="nxConsole.refreshWorkspace";const a=new r.Subject;a.pipe((0,r.debounceTime)(150)).subscribe((async()=>{const{nxWorkspace:e}=await Promise.resolve().then((()=>n(55441)));await e(!0),o.commands.executeCommand("nxConsole.refreshNxProjectsTree"),o.commands.executeCommand("nxConsole.refreshRunTargetTree"),o.commands.executeCommand("nx.graph.refresh")})),t.refreshWorkspace=function(){return o.commands.registerCommand(t.REFRESH_WORKSPACE,(()=>{a.next(void 0)}))}},98843:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.environment=void 0,t.environment={production:!0}},69218:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deactivate=t.activate=void 0;const r=n(57147),o=n(71017),a=n(89496),s=n(49018),i=n(57121),c=n(92159),l=n(45271),p=n(55489),d=n(96479),u=n(77918),f=n(98843),h=n(74911),m=n(84703),g=n(57081),y=n(18862),w=n(15424);let x,v,k,j,P,C,b;async function _(e){if(e.match(/(workspace|angular)\.json$/)&&(e=(0,o.dirname)(e)),c.WorkspaceConfigurationStore.instance.set("nxWorkspacePath",e),process.env.NX_WORKSPACE_ROOT_PATH=e,C)c.WorkspaceConfigurationStore.instance.set("nxWorkspacePath",e);else{C=new s.CliTaskProvider,(0,s.registerNxCommands)(b,C),a.tasks.registerTaskProvider("ng",C),a.tasks.registerTaskProvider("nx",C),(0,s.registerCliTaskCommands)(b,C),P=new u.NxProjectTreeProvider(b,C),v=a.window.createTreeView("nxProjects",{treeDataProvider:P});const e=new d.NxCommandsTreeProvider(b);k=a.window.createTreeView("nxCommands",{treeDataProvider:e}),b.subscriptions.push(k,v)}!async function(e){const{nxWorkspace:t}=await Promise.resolve().then((()=>n(55441))),{workspaceLayout:r}=await t();a.commands.executeCommand("setContext","nxAppsDir",[(0,o.join)(e,r.appsDir)]),a.commands.executeCommand("setContext","nxLibsDir",[(0,o.join)(e,r.libsDir)]);const s=await(0,i.getGenerators)(e);let c=!1,l=!1;s.forEach((e=>{e.data&&("application"===e.data.type?c=!0:"library"===e.data.type&&(l=!0))})),a.commands.executeCommand("setContext","nx.hasApplicationGenerators",c),a.commands.executeCommand("setContext","nx.hasLibraryGenerators",l)}(e);const t=await(0,i.checkIsNxWorkspace)(e),l=(0,r.existsSync)((0,o.join)(e,"angular.json"));a.commands.executeCommand("setContext","isAngularWorkspace",l),a.commands.executeCommand("setContext","isNxWorkspace",t),async function(e,t){const{nxWorkspace:r}=await Promise.resolve().then((()=>n(55441))),{workspaceLayout:s}=await r(),c=new Set;c.add(s.appsDir),c.add(s.libsDir),c.add("packages"),e.subscriptions.push((0,i.watchFile)(new a.RelativePattern(t,"{workspace,angular,nx}.json"),(()=>{a.commands.executeCommand(y.REFRESH_WORKSPACE)})),...Array.from(c).map((e=>(0,i.watchFile)(new a.RelativePattern((0,o.join)(t,e),"**/{project,package}.json"),(()=>{a.commands.executeCommand(y.REFRESH_WORKSPACE)})))))}(b,e),j.refresh(),P.refresh();let p="nx";t&&l?p="angularWithNx":t&&!l?p="nx":!t&&l&&(p="angular");const{nxVersion:f}=await Promise.resolve().then((()=>n(55441)));c.WorkspaceConfigurationStore.instance.set("workspaceType",p),c.WorkspaceConfigurationStore.instance.set("nxVersion",await f()),(0,i.getTelemetry)().record("WorkspaceType",{workspaceType:p})}t.activate=async function(e){try{const t=Date.now();b=e,c.GlobalConfigurationStore.fromContext(b),c.WorkspaceConfigurationStore.fromContext(b),j=new p.RunTargetTreeProvider(b),(0,i.initTelemetry)(c.GlobalConfigurationStore.instance,f.environment.production),x=a.window.createTreeView("nxRunTarget",{treeDataProvider:j});const r=a.commands.registerCommand("nxConsole.revealWebViewPanel",(async(e,t)=>{(0,l.revealWebViewPanel)({runTargetTreeItem:e,context:b,cliTaskProvider:C,runTargetTreeView:x,contextMenuUri:t,generator:e.generator})})),s=a.commands.registerCommand(p.LOCATE_YOUR_WORKSPACE.command?.command||"",(async()=>function(){if(a.workspace.workspaceFolders&&a.workspace.workspaceFolders.length>0)return a.window.showOpenDialog({canSelectFolders:!0,canSelectFiles:!1,canSelectMany:!1,openLabel:"Select workspace directory"}).then((e=>{if(e&&e[0])return _(e[0].fsPath)}));a.window.showInformationMessage("Cannot select an Nx workspace when no folders are opened in the explorer")}())),d=a.workspace.workspaceFolders&&a.workspace.workspaceFolders[0].uri.fsPath;d&&await async function(e){let t=e;const{root:n}=(0,o.parse)(e),r=c.WorkspaceConfigurationStore.instance.get("nxWorkspacePath","");for(r&&(t=r);t!==n;){if(await(0,i.fileExists)((0,o.join)(t,"angular.json")))return _(t);if(await(0,i.fileExists)((0,o.join)(t,"workspace.json")))return _(t);if(await(0,i.fileExists)((0,o.join)(t,"nx.json")))return _(t);if(await(0,i.fileExists)((0,o.join)(t,"lerna.json")))return _(t);t=(0,o.dirname)(t)}}(d),b.subscriptions.push(x,r,s,(0,y.refreshWorkspace)(),(0,w.projectGraph)());const{WorkspaceCodeLensProvider:u}=await Promise.resolve().then((()=>n(55441)));new u(b),new h.WorkspaceJsonSchema(b),new h.ProjectJsonSchema(b),g.NxConversion.createInstance(b),await(0,m.enableTypeScriptPlugin)(b),(0,i.getTelemetry)().extensionActivated((Date.now()-t)/1e3)}catch(e){a.window.showErrorMessage("Nx Console encountered an error when activating (see output panel)"),(0,i.getOutputChannel)().appendLine("Nx Console encountered an error when activating"),(0,i.getOutputChannel)().appendLine(e.stack),(0,i.getTelemetry)().exception(e.message)}},t.deactivate=async function(){(0,i.getTelemetry)().extensionDeactivated(),(0,i.teardownTelemetry)()}},32414:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(70655).__exportStar(n(89993),t)},80890:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.npmDependencies=void 0;const r=n(73292),o=n(71017);t.npmDependencies=async function(e){const t=(0,o.join)(e,"node_modules"),n=[];if(!(await(0,r.stat)(t)).isDirectory())return n;const a=await(0,r.readdir)(t);for(const e of a)e.startsWith(".")||(await(0,r.stat)((0,o.join)(t,e))).isDirectory()&&(e.startsWith("@")?(await(0,r.readdir)((0,o.join)(t,e))).forEach((r=>{n.push(`${t}/${e}/${r}`)})):n.push(`${t}/${e}`));return n}},14597:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pnpDependencyPath=t.pnpDependencies=t.isWorkspaceInPnp=void 0;const r=n(71017),o=n(89496);let a;async function s(e){const t=[".cjs",".js"];for(const n of t)try{const t=`.pnp${n}`,a=(0,r.join)(e,t);return await o.workspace.fs.stat(o.Uri.file(a)),a}catch{return}}async function i(e){const t=await s(e);if(t){if(!a){const e=require(t);e.setup(),a=e}return a}}async function c(e,t){try{const n=await i(e);if(!n)return;let r=n.resolveToUnqualified(t,e+"/")??"";return r.includes("__virtual__")&&(r=n.resolveVirtual?.(r)??""),r}catch{return}}t.isWorkspaceInPnp=async function(e){try{return!!await s(e)}catch{return!1}},t.pnpDependencies=async function(e){const t=await i(e);if(!t)return[];t.resolveRequest;const n=[];for(const r of t.getDependencyTreeRoots()){const o=t.getPackageInformation(r);if(o?.packageDependencies)for(const[t,r]of o?.packageDependencies??{}){if(null===r)continue;if(!Array.isArray(r)&&r.startsWith("workspace:"))continue;const o=await c(e,t);o&&n.push(o)}}return n},t.pnpDependencyPath=c},89993:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.workspaceDependencyPath=t.workspaceDependencies=void 0;const r=n(92159),o=n(73292),a=n(71017),s=n(89496),i=n(80890),c=n(14597);t.workspaceDependencies=async function(e,t){const n=[];return n.push(...await async function(e,t){if(!t)return[];const n=r.WorkspaceConfigurationStore.instance.get("nxVersion",null);if(n&&n<13)return[];const a=Object.values(t).map((t=>`${e}/${t.root}/package.json`)),s=[];for(const e of a)try{(await(0,o.stat)(e)).isFile()&&s.push(e.replace("/package.json",""))}catch{}return s}(e,t)),await(0,c.isWorkspaceInPnp)(e)&&n.push(...await(0,c.pnpDependencies)(e)),n.push(...await(0,i.npmDependencies)(e)),n},t.workspaceDependencyPath=async function(e,t){if(t.startsWith("."))return(0,a.join)(e,t);if(await(0,c.isWorkspaceInPnp)(e))return(0,c.pnpDependencyPath)(e,t);const n=(0,a.join)(e,"node_modules",t);try{return((await s.workspace.fs.stat(s.Uri.file(n))).type&s.FileType.Directory)===s.FileType.Directory?n:void 0}catch{return}}},47812:(e,t,n)=>{"use strict";var r,o;Object.defineProperty(t,"__esModule",{value:!0}),t.Store=t.WORKSPACE_GENERATOR_NAME_REGEX=t.GeneratorType=t.OptionType=void 0,(o=t.OptionType||(t.OptionType={})).Any="any",o.Array="array",o.Boolean="boolean",o.Number="number",o.String="string",(r=t.GeneratorType||(t.GeneratorType={})).Application="application",r.Library="library",r.Other="other",t.WORKSPACE_GENERATOR_NAME_REGEX=/^workspace-(schematic|generator):(.+)/;var a=n(83295);Object.defineProperty(t,"Store",{enumerable:!0,get:function(){return a.Store}})},83295:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},57121:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.checkIsNxWorkspace=t.getShellExecutionForConfig=t.findConfig=t.buildProjectPath=t.watchFile=t.toWorkspaceFormat=t.clearJsonCache=t.cacheJson=t.normalizeSchema=t.readAndCacheJsonFile=t.readAndParseJson=t.directoryExists=t.fileExists=void 0;const r=n(70655);r.__exportStar(n(41946),t),r.__exportStar(n(22370),t),r.__exportStar(n(10684),t),r.__exportStar(n(72634),t),r.__exportStar(n(61363),t),r.__exportStar(n(82736),t),r.__exportStar(n(96192),t);var o=n(69738);Object.defineProperty(t,"fileExists",{enumerable:!0,get:function(){return o.fileExists}}),Object.defineProperty(t,"directoryExists",{enumerable:!0,get:function(){return o.directoryExists}}),Object.defineProperty(t,"readAndParseJson",{enumerable:!0,get:function(){return o.readAndParseJson}}),Object.defineProperty(t,"readAndCacheJsonFile",{enumerable:!0,get:function(){return o.readAndCacheJsonFile}}),Object.defineProperty(t,"normalizeSchema",{enumerable:!0,get:function(){return o.normalizeSchema}}),Object.defineProperty(t,"cacheJson",{enumerable:!0,get:function(){return o.cacheJson}}),Object.defineProperty(t,"clearJsonCache",{enumerable:!0,get:function(){return o.clearJsonCache}}),Object.defineProperty(t,"toWorkspaceFormat",{enumerable:!0,get:function(){return o.toWorkspaceFormat}});var a=n(35003);Object.defineProperty(t,"watchFile",{enumerable:!0,get:function(){return a.watchFile}});var s=n(4629);Object.defineProperty(t,"buildProjectPath",{enumerable:!0,get:function(){return s.buildProjectPath}});var i=n(98316);Object.defineProperty(t,"findConfig",{enumerable:!0,get:function(){return i.findConfig}});var c=n(17639);Object.defineProperty(t,"getShellExecutionForConfig",{enumerable:!0,get:function(){return c.getShellExecutionForConfig}});var l=n(25544);Object.defineProperty(t,"checkIsNxWorkspace",{enumerable:!0,get:function(){return l.checkIsNxWorkspace}})},41946:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AbstractTreeProvider=void 0;const r=n(89496);t.AbstractTreeProvider=class{constructor(){this._onDidChangeTreeData=new r.EventEmitter,this.onDidChangeTreeData=this._onDidChangeTreeData.event}refresh(){this._onDidChangeTreeData.fire(void 0)}getTreeItem(e){return e}}},25544:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.checkIsNxWorkspace=void 0;const r=n(71017),o=n(69738);t.checkIsNxWorkspace=async function(e){let t=await(0,o.fileExists)((0,r.join)(e,"nx.json"));return t||(t=(await(0,o.readAndCacheJsonFile)("lerna.json",e)).json.useNx??!1),t}},22370:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(70655);r.__exportStar(n(75449),t),r.__exportStar(n(46682),t)},46682:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.teardownTelemetry=t.initTelemetry=t.getTelemetry=void 0;const r=n(75449),o=n(89496);let a,s=null;t.getTelemetry=function(){return a};t.initTelemetry=function(e,t){return a=t?r.Telemetry.withGoogleAnalytics(e,"vscode"):r.Telemetry.withLogger(e),e.get("shownTelemetryPrompt")||(o.window.showInformationMessage("Help improve Nx Console by allowing us to collect data. To opt-out set nxConsole.enableTelemetry to false in settings."),e.set("shownTelemetryPrompt",!0)),s=o.workspace.onDidChangeConfiguration((t=>{t.affectsConfiguration("nxConsole.enableTelemetry")&&(e.get("enableTelemetry")?a.startedTracking():a.stoppedTracking())})),a},t.teardownTelemetry=function(){s&&s.dispose()}},5448:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GoogleAnalyticsSink=void 0;class r{constructor(e,t){this.type=e,this.data=t}fetch(e){return this.require(e),this.data[e]}require(e){const t=`Telemetry: ${this.type} is missing ${e}`;if(!this.data.hasOwnProperty(e))throw new Error(t)}}t.GoogleAnalyticsSink=class{constructor(e,t){this.user=e,this.platform=t,this.visitor=n(40387)("UA-88380372-8",{uid:this.user.id}),this.setPersistentParams()}get enabled(){return"untracked"!==this.user.state}setPersistentParams(){this.visitor.set("uid",this.user.id),this.visitor.set("ds","app"),this.visitor.set("cd1",this.user.state),this.visitor.set("cd2",this.platform),this.visitor.set("cd3",2)}record(e,t){if(!this.enabled)return;const n=new r(e,t);switch(e){case"UserStateChanged":this.user.state=n.fetch("state"),this.setPersistentParams();break;case"ExtensionActivated":this.extensionActivated(n.fetch("time"));break;case"ExtensionDeactivated":this.extensionDeactivated();break;case"StartedTracking":this.startedTracking();break;case"StoppedTracking":this.stoppedTracking();break;case"ScreenViewed":this.screenViewed(n.fetch("screen"));break;case"CommandRun":this.commandRun(n.fetch("commandType"),n.fetch("time"));break;case"ExceptionOccurred":this.exception(n.fetch("error"));break;case"FeatureUsed":this.featureUsed(n.fetch("feature"));break;case"WorkspaceType":this.workspaceType(n.fetch("workspaceType"));break;default:throw new Error(`Unknown Telemetry type: ${e}`)}}extensionActivated(e){this.visitor.event({ec:"Application",ea:"Activated"}).timing({utc:"Application",utv:"Activation Time",utt:e}).send()}extensionDeactivated(){this.visitor.event({ec:"Application",ea:"Deactivated"}).send()}startedTracking(){this.visitor.event({ec:"Data Collection",ea:"Opt In"}).send()}stoppedTracking(){this.visitor.event({ec:"Data Collection",ea:"Opt Out"}).send()}screenViewed(e){this.visitor.screenview({an:"Nx Console",cd:e}).send()}commandRun(e,t){this.visitor.timing({utc:"Command",utv:e,utt:t}).send()}exception(e){this.visitor.exception({exd:e}).send()}featureUsed(e){this.visitor.event({ec:"Feature",ea:e}).send()}workspaceType(e){this.visitor.event({ec:"WorkspaceType",ea:e,ev:1}).send()}}},42027:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(70655);r.__exportStar(n(75663),t),r.__exportStar(n(27542),t),r.__exportStar(n(5448),t)},27542:(e,t)=>{"use strict";function n(e){return`[Telemetry ${e}]`}Object.defineProperty(t,"__esModule",{value:!0}),t.LoggerSink=t.header=void 0,t.header=n,t.LoggerSink=class{constructor(e=console){this.writer=e}record(e,t){this.writer.log(n(e),t)}}},75663:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MemorySink=void 0,t.MemorySink=class{constructor(){this.records=[]}record(e,t){this.records.push({type:e,data:t})}recordsByType(e){return this.records.filter((t=>t.type===e))}oneRecord(e){const t=e?this.recordsByType(e):this.records;if(1!==t.length)throw new Error(`Expected one record, have ${t.length}`);return t[0]}hasRecord(e){return(e?this.recordsByType(e):this.records).length>0}}},75449:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Telemetry=void 0;const r=n(42027),o=n(48991);class a{constructor(e){this.user=e,this.sinks=[],this.state=this.user.state}static withGoogleAnalytics(e,t){const n=o.User.fromStorage(e),s=new a(n),i=new r.GoogleAnalyticsSink(n,t);return s.addSink(i),s}static withLogger(e){const t=o.User.fromStorage(e),n=new a(t),s=new r.LoggerSink;return n.addSink(s),n}addSink(e){this.sinks.push(e)}record(e,t={}){this.sinks.forEach((n=>n.record(e,t)))}extensionActivated(e){this.record("ExtensionActivated",{time:e})}extensionDeactivated(){this.record("ExtensionDeactivated")}startedTracking(){this.user.tracked(),this.userStateChanged(),this.record("StartedTracking")}stoppedTracking(){this.record("StoppedTracking"),this.user.untracked(),this.userStateChanged()}userStateChanged(){this.state!==this.user.state&&(this.state=this.user.state,this.record("UserStateChanged",{state:this.user.state}))}screenViewed(e){this.record("ScreenViewed",{screen:e})}commandRun(e,t){this.record("CommandRun",{commandType:e,time:t})}exception(e){this.record("ExceptionOccurred",{error:e})}featureUsed(e){this.record("FeatureUsed",{feature:e})}}t.Telemetry=a},48991:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.User=void 0;class r{constructor(e,t="tracked"){this.id=e,this.state=t}static fromStorage(e){let t=e.get("uuid"),o="tracked";return t||(t=n(57731).v4(),e.set("uuid",t)),e.get("enableTelemetry",!0)||(o="untracked"),new r(t,o)}tracked(){this.state="tracked"}untracked(){this.state="untracked"}isTracked(){return"tracked"===this.state}isUntracked(){return"untracked"===this.state}}t.User=r},4629:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buildProjectPath=void 0;const r=n(71017),o=n(69738);t.buildProjectPath=async function(e,t){const n=(0,r.join)(e,t),a=(0,r.join)(n,"project.json"),s=(0,r.join)(n,"package.json");return await(0,o.fileExists)(a)?a:await(0,o.fileExists)(s)?s:void 0}},98316:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.findConfig=t.forEachAncestorDirectory=void 0;const r=n(71017),o=n(89496);async function a(e,t){for(;;){const n=await t(e);if(void 0!==n)return n;const o=(0,r.dirname)(e);if(o===e)return;e=o}}t.forEachAncestorDirectory=a,t.findConfig=async function(e,t){return a(e,(async e=>{const n=(0,r.join)(e,t);try{return await o.workspace.fs.stat(o.Uri.file(n)),n}catch(e){return}}))}},82736:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getExecutors=void 0;const r=n(96192);t.getExecutors=async function(e,t,n){return(await(0,r.readCollections)(e,{projects:t,clearPackageJsonCache:n})).filter((e=>"executor"===e.type))}},61363:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getGenerators=void 0;const r=n(47812),o=n(71017),a=n(96192),s=n(69738);async function i(e,t){const n=(0,o.join)("tools",t);return await(0,s.directoryExists)((0,o.join)(e,n))?await async function(e,t,n){const i=(0,o.join)(e,t),c="workspace-"+("generators"===n?"generator":"schematic"),l=(0,o.join)(i,"collection.json");if(await(0,s.fileExists)(l)){const t=await(0,s.readAndCacheJsonFile)(`${i}/collection.json`);return(0,a.getCollectionInfo)(e,c,l,{path:l,json:{}},t.json)}return await Promise.all((0,s.listFiles)(i).filter((e=>"schema.json"===(0,o.basename)(e))).map((async e=>{const t=await(0,s.readAndCacheJsonFile)(e,""),n=t.json.id||t.json.$id,o=t.json["x-type"]??r.GeneratorType.Other;return{name:c,type:"generator",path:i,data:{name:n,collection:c,options:await(0,s.normalizeSchema)(t.json,"nx"),description:t.json.description??"",type:o}}})))}(e,n,t):Promise.resolve([])}t.getGenerators=async function(e,t){const n=e;let r=(await(0,a.readCollections)(e,{projects:t,clearPackageJsonCache:!1})).filter((e=>"generator"===e.type));return r=[...r,...await i(n,"schematics"),...await i(n,"generators")],r.filter((e=>!!e.data))}},94486:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ngVersion=void 0;const r=n(32414),o=n(92159);let a,s=!1;t.ngVersion=async function(){if(!s){const e=o.WorkspaceConfigurationStore.instance.get("nxWorkspacePath",""),t=await(0,r.workspaceDependencyPath)(e,"@angular/cli");if(!t)return 0;a=require(t+"/package.json"),s=!0}if(!a)return 0;const e=a.version.split(".")[0];return e?+e:0}},10684:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getOutputChannel=void 0;const r=n(89496);let o;t.getOutputChannel=function(){return o||(o=r.window.createOutputChannel("Nx Console")),o}},96192:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCollectionInfo=t.readCollections=void 0;const r=n(32414),o=n(47812),a=n(22037),s=n(71017),i=n(69738);async function c(e,{packagePath:t,packageName:n,packageJson:r}){try{const[o,a]=await Promise.all([(0,i.readAndCacheJsonFile)(r.executors||r.builders,t),(0,i.readAndCacheJsonFile)(r.generators||r.schematics,t)]);return l(e,n,t,o,a)}catch(e){return null}}async function l(e,t,n,o,i){const l=new Map,h=(e,r,o,i)=>{let c=(0,s.resolve)(n,(0,s.dirname)(i),r.schema);return"win32"===(0,a.platform)()&&(c=`file:///${c.replace(/\\/g,"/")}`),{name:`${t}:${e}`,type:o,path:c}},m={...o.json.executors,...o.json.builders};for(const[e,t]of Object.entries(m)){if(!d(e,t))continue;const n=h(e,t,"executor",o.path);l.has(u(n.name,"executor"))||l.set(u(n.name,"executor"),n)}const g={...i.json.generators,...i.json.schematics};for(const[e,n]of Object.entries(g))if(d(e,n))try{const r=h(e,n,"generator",i.path);if(r.data=p(t,e,n),l.has(u(r.name,"generator")))continue;l.set(u(r.name,"generator"),r)}catch(e){}if(i.json.extends&&Array.isArray(i.json.extends)){const t=i.json.extends,n=(await Promise.all(t.filter((e=>"@nrwl/workspace"!==e)).map((async t=>{const n=await(0,r.workspaceDependencyPath)(e,t);return n?c(e,await f(n)):null})))).flat().filter((e=>Boolean(e)));for(const e of n)l.has(e.name)||l.set(e.name,e)}return Array.from(l.values())}function p(e,t,n){try{let r;switch(n["x-type"]){case"application":r=o.GeneratorType.Application;break;case"library":r=o.GeneratorType.Library;break;default:r=o.GeneratorType.Other}return{name:t,collection:e,description:n.description||"",type:r}}catch(n){console.error(n),console.error(`Invalid package.json for schematic ${e}:${t}`)}}function d(e,t){return!t.hidden&&!t.private&&!t.extends&&"ng-add"!==e}function u(e,t){return`${e}-${t}`}async function f(e){const{json:t}=await(0,i.readAndCacheJsonFile)((0,s.join)(e,"package.json"));return{packagePath:e,packageName:t.name,packageJson:t}}t.readCollections=async function(e,t){t?.clearPackageJsonCache&&(0,i.clearJsonCache)("package.json",e);const n=await(0,r.workspaceDependencies)(e,t.projects),o=await Promise.all(n.map((async e=>await f(e)))),a=(await Promise.all(o.map((t=>c(e,t))))).flat(),s=new Map;for(const e of a)e&&(s.has(u(e.name,e.type))||s.set(u(e.name,e.type),e));return Array.from(s.values())},t.getCollectionInfo=l},72634:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.readBuilderSchema=t.readTargets=t.readTargetDef=void 0;const r=n(71017),o=n(69738),a=n(22370),s=n(10684),i=n(32414);function c(e,t,n){return{options:[],configurations:t.configurations?Object.keys(t.configurations).map((e=>({name:e,defaultValues:l(t.configurations,e)}))):[],name:e,project:n,description:t.description??"",builder:t.executor}}function l(e,t){const n=[],r=e[t];return r?Object.keys(r).reduce(((e,t)=>[...e,{name:t,defaultValue:(0,o.getPrimitiveValue)(r[t])}]),n):n}t.readTargetDef=c,t.readTargets=function(e,t){return t?Object.entries(t).map((([t,n])=>c(t,n,e))):[]},t.readBuilderSchema=async function(e,t,n,c){try{const[a,s]=t.split(":"),l=await(0,i.workspaceDependencyPath)(e,a);if(!l)return;const p=await(0,o.readAndCacheJsonFile)(r.join(l,"package.json")),d=p.json.builders||p.json.executors,u=d.startsWith(".")?d:`./${d}`,f=await(0,o.readAndCacheJsonFile)(u,r.dirname(p.path)),h={...f.json.builders,...f.json.executors}[s],m=await(0,o.readAndCacheJsonFile)(h.schema,r.dirname(f.path));return await(0,o.normalizeSchema)(m.json,n,c)}catch(e){const t=e.toString?e.toString():JSON.stringify(e);(0,s.getOutputChannel)().appendLine(t),(0,a.getTelemetry)().exception(t)}}},17639:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getShellExecutionForConfig=void 0;const r=n(14560),o=n(89496);t.getShellExecutionForConfig=function(e){const t=(0,r.detectPackageManager)(e.cwd),n=(0,r.getPackageManagerCommand)(t);return new o.ShellExecution(`${n.exec} ${e.displayCommand}`,{cwd:e.cwd})}},69738:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toWorkspaceFormat=t.getPrimitiveValue=t.normalizeSchema=t.readAndCacheJsonFile=t.cacheJson=t.clearJsonCache=t.readAndParseJson=t.fileExists=t.directoryExists=t.listFiles=t.fileContents=t.files=t.crossFs=void 0;const r=n(71017),o=n(14560),a=n(57147),s=n(73292),i=n(79816),c=n(10684),l=n(63948),p=n(61201),d=n(16541),u=n(94486),f=new p.ZipOpenFS({libzip:d.getLibzipSync});t.crossFs=new p.PosixFS(f),t.files={},t.fileContents={};const h=["name","project","module","watch","style","directory","port"],m=new Set(h);async function g(e){const n=await t.crossFs.readFilePromise(e,"utf8");try{return JSON.parse(n)}catch{const t=[],r=(0,i.parse)(n,t);if(t.length>0)for(const{error:n,offset:r}of t)(0,c.getOutputChannel)().appendLine(`${(0,i.printParseErrorCode)(n)} in JSON at position ${r} in ${e}`);return r}}function y(e,t,n,r){return e.has(t.name)||!!n&&!t.default&&!r&&"boolean"!==t.type}function w(e){return e.items&&{items:e.items.enum||e.items.length&&e.items}}function x(e){return void 0!==e.message}function v(e){return void 0!==e.value||void 0!==e.label}t.listFiles=function e(t){if(t.indexOf("node_modules")>-1)return[];if(t.indexOf("dist")>-1)return[];const n=[t];try{(0,a.readdirSync)(t).forEach((o=>{const s=r.join(t,o);try{(0,a.statSync)(s).isDirectory()?(0,a.statSync)(s).isDirectory()&&n.push(...e(s)):n.push(s)}catch{}}))}catch{}return n},t.directoryExists=async function(e){try{return(await(0,s.stat)(e)).isDirectory()}catch{return!1}},t.fileExists=async function(e){try{return(await(0,s.stat)(e)).isFile()}catch{return!1}},t.readAndParseJson=g,t.clearJsonCache=function(e,n=""){const o=r.join(n,e);return delete t.fileContents[o]},t.cacheJson=function(e,n="",o){const a=r.join(n,e);return t.fileContents[a]?{json:t.fileContents[a],path:a}:(o&&(t.fileContents[a]=o),{json:o,path:a})},t.readAndCacheJsonFile=async function(e,n=""){if(!e)return{path:"",json:{}};let o=r.join(n,e);o.startsWith("file:\\")&&(o=o.replace("file:\\",""));try{const e=await t.crossFs.statPromise(o);if(t.fileContents[o]||e.isFile())return t.fileContents[o]||(t.fileContents[o]=await g(o)),{path:o,json:t.fileContents[o]}}catch(e){(0,c.getOutputChannel)().appendLine(`${o} does not exist`)}return{path:o,json:{}}},t.normalizeSchema=async function(e,t,n){const r="ng"===t&&await(0,u.ngVersion)()>=14,a=(s=e,i={hyphenate:r},Object.keys(s.properties||{}).reduce(((e,t)=>{const n=s.properties[t],r=n.$default,a="argv"===r?.$source?r.index:void 0,c="number"==typeof a?a:void 0;if(!function(e,t){return!!["path"].includes(e)||("hidden"in t?!t.hidden:t.visible??!0)}(t,n))return e;const l=i?.hyphenate?(0,o.names)(t).fileName:t;return e.push({name:l,originalName:t,positional:c,...n}),e}),[]));var s,i;const c=new Set(e.required||[]);return a.map((e=>{const t=e["x-prompt"],r=n?.[e.originalName??e.name],o=e.$default,a={...e,isRequired:y(c,e,t,o),aliases:e.alias?[e.alias]:[],...void 0!==r&&{default:r},...o&&{$default:o},...e.enum&&{items:e.enum.map((e=>e.toString()))},...w(e)};if(t&&(a.tooltip=x(t)?t.message:t,a.itemTooltips=function(e){const t={};return e&&x(e)&&(e.items||[]).forEach((e=>{v(e)&&e.label&&(t[e.value]=e.label)})),t}(t),x(t)&&!a.items)){const e=(t.items||[]).map((e=>v(e)?e.value:e));e.length>0&&(a.items=e)}return a})).sort(((e,t)=>"number"==typeof e.positional&&"number"==typeof t.positional?e.positional-t.positional:"number"==typeof e.positional?-1:"number"==typeof t.positional?1:e.isRequired?t.isRequired?e.name.localeCompare(t.name):-1:t.isRequired?1:m.has(e.name)?m.has(t.name)?h.indexOf(e.name)-h.indexOf(t.name):-1:m.has(t.name)?1:e.name.localeCompare(t.name)))},t.getPrimitiveValue=function(e){return"string"==typeof e||"number"==typeof e||"boolean"==typeof e?e.toString():void 0},t.toWorkspaceFormat=function(e){const t=(0,l.toNewFormat)(e),n=Object.entries(t.projects||{}).sort(((e,t)=>e[0].localeCompare(t[0])));return t.projects=Object.fromEntries(n),t}},35003:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.watchFile=void 0;const r=n(89496);t.watchFile=function(e,t,n){const o=r.workspace.createFileSystemWatcher(e);return o.onDidChange(t,n),o}},84703:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(70655).__exportStar(n(12556),t)},12556:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enableTypeScriptPlugin=void 0;const r=n(57121),o=n(92159),a=n(71017),s=n(89496),i="tsconfig.base.json";async function c(e,t){if(o.GlobalConfigurationStore.instance.get("enableLibraryImports")){const n=await async function(e){let t=(await(0,r.readAndCacheJsonFile)(i,e)).json;if(!("compilerOptions"in t)&&(t=(await(0,r.readAndCacheJsonFile)("tsconfig.json",e)).json,!("compilerOptions"in t)))return[];const n=t.compilerOptions.paths??{},o=[];for(const[,t]of Object.entries(n)){const n=(0,a.join)(e,t[0]),s=await(0,r.findConfig)(n,"tsconfig.lib.json");if(!s)continue;const i=(0,a.dirname)(s);o.push({mainFile:n,directory:i})}return o}(e);t.configurePlugin("@monodon/typescript-nx-imports-plugin",{externalFiles:n})}}t.enableTypeScriptPlugin=async function(e){const t=s.extensions.getExtension("vscode.typescript-language-features");if(!t)return;if(await t.activate(),!t.exports||!t.exports.getAPI)return;const n=t.exports.getAPI(0);if(!n)return;const a=o.WorkspaceConfigurationStore.instance.get("nxWorkspacePath","");s.workspace.onDidOpenTextDocument((e=>{(e.uri.fsPath.endsWith(".ts")||e.uri.fsPath.endsWith(".tsx"))&&c(a,n)}),void 0,e.subscriptions),(0,r.watchFile)(`${a}/tsconfig.base.json`,(()=>{(0,r.clearJsonCache)(i,a),c(a,n)}),e.subscriptions),s.workspace.onDidChangeTextDocument((({document:e})=>{e.uri.fsPath.endsWith(i)&&c(a,n)}),void 0,e.subscriptions),s.workspace.onDidChangeConfiguration((async e=>{const t=e.affectsConfiguration(o.GlobalConfigurationStore.configurationSection);o.GlobalConfigurationStore.instance.get("enableLibraryImports")||(s.window.setStatusBarMessage("Restarting the TypeScript Server",5e3),await s.commands.executeCommand("typescript.restartTsServer")),t&&c(a,n)}),void 0,e.subscriptions),c(a,n)}},92159:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WorkspaceConfigKeys=t.GlobalConfigKeys=void 0;const r=n(70655);r.__exportStar(n(69527),t),r.__exportStar(n(63800),t);var o=n(71597);Object.defineProperty(t,"GlobalConfigKeys",{enumerable:!0,get:function(){return o.GlobalConfigKeys}}),Object.defineProperty(t,"WorkspaceConfigKeys",{enumerable:!0,get:function(){return o.WorkspaceConfigKeys}})},71597:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WORKSPACE_CONFIG_KEYS=t.GLOBAL_CONFIG_KEYS=void 0,t.GLOBAL_CONFIG_KEYS=["enableTelemetry","enableGenerateFromContextMenu","enableWorkspaceConfigCodeLens","enableLibraryImports","enableGeneratorFilters","generatorAllowlist","generatorBlocklist"],t.WORKSPACE_CONFIG_KEYS=["nxWorkspacePath","nxConversionCount","nxConversionDoNotAskAgain","workspaceType","nxVersion"]},69527:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GlobalConfigurationStore=void 0;const r=n(89496),o=n(71597);let a;class s{constructor(e){this.state=e}static fromContext(e){return a=new s(e.globalState),a}static get instance(){if(!a)throw Error("Please create a configuration store with `fromContext` first");return a}get(e,t){const n=this.storage(e).get(e,t);return void 0===n?t||null:n}set(e,t){this.storage(e).update(e,t)}delete(e){this.storage(e).update(e,void 0)}storage(e){return function(e){return o.GLOBAL_CONFIG_KEYS.includes(e)}(e)?this.config:this.state}get config(){return r.workspace.getConfiguration(s.configurationSection)}}t.GlobalConfigurationStore=s,s.configurationSection="nxConsole"},63800:(e,t)=>{"use strict";let n;Object.defineProperty(t,"__esModule",{value:!0}),t.WorkspaceConfigurationStore=void 0;class r{constructor(e){this.state=e}static fromContext(e){return n=new r(e.workspaceState),n}static get instance(){if(!n)throw Error("Please create a configuration store with `fromContext` first");return n}delete(e){this.state.update(e,void 0)}get(e,t){const n=this.state.get(e,t);return void 0===n?t:n}set(e,t){this.state.update(e,t)}}t.WorkspaceConfigurationStore=r},74911:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(70655);r.__exportStar(n(25951),t),r.__exportStar(n(14998),t)},14998:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProjectJsonSchema=void 0;const r=n(57121),o=n(92159),a=n(55441),s=n(71017),i=n(89496);let c;t.ProjectJsonSchema=class{constructor(e){const t=o.WorkspaceConfigurationStore.instance.get("nxWorkspacePath","");c&&c.dispose(),c=(0,r.watchFile)((0,s.join)(t,"package.json"),(()=>{this.setupSchema(t,e.extensionUri,!0)})),e.subscriptions.push(c),this.setupSchema(t,e.extensionUri)}async setupSchema(e,t,n=!1){const o=i.Uri.joinPath(t,"project-schema.json"),{workspace:s}=await(0,a.nxWorkspace)(),c=function(e){const[t,n]=function(e){return[e.map((e=>`\n{\n  "if": {\n    "properties": { "builder": { "const": "${e.name}" } },\n    "required": ["builder"]\n  },\n  "then": {\n    "properties": {\n      "options": {\n        "$ref": "${e.path}"\n      },\n      "configurations": {\n        "additionalProperties": {\n          "$ref": "${e.path}",\n          "required": []\n        }\n      }\n    }\n  }\n}\n`)).join(","),e.map((e=>`\n{\n  "if": {\n    "properties": { "executor": { "const": "${e.name}" } },\n    "required": ["executor"]\n  },\n  "then": {\n    "properties": {\n      "options": {\n        "$ref": "${e.path}"\n      },\n      "configurations": {\n        "additionalProperties": {\n          "$ref": "${e.path}",\n          "required": []\n        }\n      }\n    }\n  }\n}\n`)).join(",")]}(e);return function(e,t){return`\n  {\n    "title": "JSON schema for Nx projects",\n    "id": "https://nx.dev/project-schema",\n    "type": "object",\n    "properties": {\n      "targets": {\n        "description": "Configures all the targets which define what tasks you can run against the project",\n        "additionalProperties": {\n          "type": "object",\n          "properties": {\n            "executor": {\n              "description": "The function that Nx will invoke when you run this target",\n              "type": "string"\n            },\n            "options": {\n              "type": "object"\n            },\n            "configurations": {\n              "description": "provides extra sets of values that will be merged into the options map",\n              "additionalProperties": {\n                "type": "object"\n              }\n            }\n          },\n          "allOf": [\n            ${t}\n          ]\n        }\n      }\n    }\n  }`}(0,n)}(await(0,r.getExecutors)(e,s.projects,n));i.workspace.fs.writeFile(o,new Uint8Array(Buffer.from(c,"utf8")))}}},25951:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WorkspaceJsonSchema=void 0;const r=n(57121),o=n(92159),a=n(55441),s=n(71017),i=n(89496);let c;t.WorkspaceJsonSchema=class{constructor(e){const t=o.WorkspaceConfigurationStore.instance.get("nxWorkspacePath","");c&&c.dispose(),c=(0,r.watchFile)((0,s.join)(t,"package.json"),(()=>{this.setupSchema(t,e.extensionUri,!0)})),e.subscriptions.push(c),this.setupSchema(t,e.extensionUri)}async setupSchema(e,t,n=!1){const o=i.Uri.joinPath(t,"workspace-schema.json"),{workspace:s}=await(0,a.nxWorkspace)(),c=await(0,r.getExecutors)(e,s.projects,n),l=await function(e){const[t,n]=function(e){return[e.map((e=>`\n{\n  "if": {\n    "properties": { "builder": { "const": "${e.name}" } },\n    "required": ["builder"]\n  },\n  "then": {\n    "properties": {\n      "options": {\n        "$ref": "${e.path}"\n      },\n      "configurations": {\n        "additionalProperties": {\n          "$ref": "${e.path}",\n          "required": []\n        }\n      }\n    }\n  }\n}\n`)).join(","),e.map((e=>`\n{\n  "if": {\n    "properties": { "executor": { "const": "${e.name}" } },\n    "required": ["executor"]\n  },\n  "then": {\n    "properties": {\n      "options": {\n        "$ref": "${e.path}"\n      },\n      "configurations": {\n        "additionalProperties": {\n          "$ref": "${e.path}",\n          "required": []\n        }\n      }\n    }\n  }\n}\n`)).join(",")]}(e);return function(e,t){return`\n  {\n    "title": "JSON schema for Nx workspaces",\n    "id": "https://nx.dev",\n    "type": "object",\n    "properties": {\n      "version": {\n        "type": "number",\n        "enum": [1, 2]\n      }\n    },\n    "allOf": [\n      {\n        "if": {\n          "properties": { "version": { "const": 1 } },\n          "required": ["version"]\n        },\n        "then": {\n          "properties": {\n            "projects": {\n              "type": "object",\n              "additionalProperties": {\n                "type": "object",\n                "properties": {\n                  "architect": {\n                    "description": "Configures all the targets which define what tasks you can run against the project",\n                    "additionalProperties": {\n                      "type": "object",\n                      "properties": {\n                        "builder": {\n                          "description": "The function that Nx will invoke when you run this architect",\n                          "type": "string"\n                        },\n                        "options": {\n                          "type": "object"\n                        },\n                        "configurations": {\n                          "description": "provides extra sets of values that will be merged into the options map",\n                          "additionalProperties": {\n                            "type": "object"\n                          }\n                        }\n                      },\n                      "allOf": [\n                       ${e}\n                      ]\n                    }\n                  }\n                }\n              }\n            }\n          }\n        }\n      },\n      {\n        "if": {\n          "properties": { "version": { "const": 2 } },\n          "required": ["version"]\n        },\n        "then": {\n          "properties": {\n           "projects": {\n              "type": "object",\n              "additionalProperties": {\n                "oneOf": [\n                  {\n                    "type": "string"\n                  },\n                  {\n                   "type": "object",\n                   "properties": {\n                      "targets": {\n                        "description": "Configures all the targets which define what tasks you can run against the project",\n                        "additionalProperties": {\n                          "type": "object",\n                          "properties": {\n                            "executor": {\n                              "description": "The function that Nx will invoke when you run this target",\n                              "type": "string"\n                            },\n                            "options": {\n                              "type": "object"\n                            },\n                            "configurations": {\n                              "description": "provides extra sets of values that will be merged into the options map",\n                              "additionalProperties": {\n                                "type": "object"\n                              }\n                            }\n                          },\n                          "allOf": [\n                           ${t}\n                          ]\n                        }\n                      }\n                    }\n                  }\n                ]\n              }\n            }\n          }\n        }\n      }\n    ]\n  }`}(t,n)}(c);i.workspace.fs.writeFile(o,new Uint8Array(Buffer.from(l,"utf8")))}}},96479:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(70655);r.__exportStar(n(11867),t),r.__exportStar(n(4583),t)},4583:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NxCommandsTreeProvider=void 0;const r=n(57121),o=n(11867);class a extends r.AbstractTreeProvider{constructor(e){super(),this.context=e}getParent(e){return null}getChildren(){return["run-many","affected","affected:apps","affected:build","affected:e2e","affected:libs","affected:lint","affected:test","list","migrate"].map((e=>new o.NxCommandsTreeItem(e,this.context.extensionPath)))}}t.NxCommandsTreeProvider=a},11867:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NxCommandsTreeItem=void 0;const r=n(89496),o=n(71017);class a extends r.TreeItem{constructor(e,t){super(e,r.TreeItemCollapsibleState.None),this.affectedCommand=e,this.extensionPath=t,this.command={title:this.affectedCommand,command:`nx.${this.affectedCommand.replace(":",".")}`,tooltip:`Run nx ${this.affectedCommand}`},this.iconPath={light:r.Uri.file((0,o.join)(this.extensionPath,"assets","nx-cli-light.svg")),dark:r.Uri.file((0,o.join)(this.extensionPath,"assets","nx-cli-dark.svg"))}}}t.NxCommandsTreeItem=a},57081:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(70655).__exportStar(n(10674),t)},10674:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NxConversion=void 0;const r=n(57121),o=n(92159),a=n(72872),s=n(14857),i=n(89496);class c{constructor(e){this._context=e,this._listener=new a.Subject;const t=o.WorkspaceConfigurationStore.instance.get("nxConversionCount",0),n=e.extensionMode===i.ExtensionMode.Development?1:5;this._listener.pipe(function(e,t,n){const r=!o.WorkspaceConfigurationStore.instance.get("nxConversionDoNotAskAgain",!1)||n.extensionMode===i.ExtensionMode.Development;return(0,a.pipe)((0,s.scan)((e=>e+1),e),(0,s.tap)((e=>{o.WorkspaceConfigurationStore.instance.set("nxConversionCount",e)})),(0,s.filter)((e=>e%t==0)),(0,s.filter)((()=>r&&"angular"===o.WorkspaceConfigurationStore.instance.get("workspaceType",""))))}(t,n,e)).subscribe((async e=>{l(e)}))}static get instance(){if(!c._instance)throw"NxConversion not created yet, please create an instance first with `NxConversion.createInstance(context)`";return c._instance}static set instance(e){c._instance?console.warn("NxConversion already created, are you sure you want to create another instance?"):i.commands.registerCommand("nxConsole.makeNgFaster",l),c._instance=e}static createInstance(e){return c.instance=new c(e),c.instance}async trackEvent(e){this._listener.next(e)}}async function l(e=0){(0,r.getTelemetry)().screenViewed("Convert to Nx");const t=["Yes","No"];e>=10&&t.push("Don't ask again");const n=await i.window.showInformationMessage("Would you like to make ng commands faster by adding computation caching? [Learn more here](https://nx.dev/migration/migration-angular?utm_source=vscode-nx-conversion&utm_medium=prompt&utm_campaign=vscode-nx-conversioni#from-nx-console)",...t);void 0!==n&&("Yes"===n?((0,r.getTelemetry)().screenViewed("Convert to Nx - Yes"),(0,r.getTelemetry)().featureUsed("makeNgFaster"),i.tasks.executeTask(function(){const e=o.WorkspaceConfigurationStore.instance.get("nxWorkspacePath",""),t="make-angular-cli-faster";return new i.Task({type:"nx"},i.TaskScope.Workspace,t,"nx",(0,r.getShellExecutionForConfig)({cwd:e,displayCommand:t}))}())):"No"===n?((0,r.getTelemetry)().screenViewed("Convert to Nx - No "),(0,r.getTelemetry)().featureUsed("do-not makeNgFaster")):(o.WorkspaceConfigurationStore.instance.set("nxConversionDoNotAskAgain",!0),(0,r.getTelemetry)().featureUsed("do-not-ask-again makeNgFaster"),i.window.showInformationMessage("If you change your mind, you can run the `make ng faster with Nx` command through the command palette.")))}t.NxConversion=c},77918:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(70655);r.__exportStar(n(10044),t),r.__exportStar(n(10465),t)},10465:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NxProjectTreeItem=void 0;const r=n(89496);class o extends r.TreeItem{constructor(e,t,n){super(t,n),this.nxProject=e}}t.NxProjectTreeItem=o},10044:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NxProjectTreeProvider=void 0;const r=n(57121),o=n(55441),a=n(71017),s=n(89496),i=n(10465);class c extends r.AbstractTreeProvider{constructor(e,t){super(),this.cliTaskProvider=t,[["editWorkspaceJson",this.editWorkspaceJson],["revealInExplorer",this.revealInExplorer],["runTask",this.runTask],["refreshNxProjectsTree",this.refreshNxProjectsTree]].forEach((([t,n])=>{e.subscriptions.push(s.commands.registerCommand(`nxConsole.${t}`,n,this))}))}async getParent(e){const{project:t,target:n,root:r}=e.nxProject;return n?n.configuration?this.createNxProjectTreeItem({project:t,target:{name:n.name},root:r},n.name):this.createNxProjectTreeItem({project:t,root:r},t):null}async createNxProjectTreeItem(e,t,n){const o=new i.NxProjectTreeItem(e,t,n?s.TreeItemCollapsibleState.Collapsed:s.TreeItemCollapsibleState.None);if(e.target)o.contextValue="task";else{const t=(await this.cliTaskProvider.getProjects())[e.project];t&&(void 0===t.root&&(0,r.getOutputChannel)().appendLine(`Project ${e.project} has no root. This could be because of an error loading the workspace configuration.`),o.resourceUri=s.Uri.file((0,a.join)(this.cliTaskProvider.getWorkspacePath(),t.root??""))),o.contextValue="project"}return o}async getChildren(e){if(!e){const e=await this.cliTaskProvider.getProjectEntries();return Promise.all(e.map((async([e,t])=>this.createNxProjectTreeItem({project:e,root:t.root},e,Boolean(t.targets)))))}const{nxProject:t}=e,{target:n,project:r}=t,o=(await this.cliTaskProvider.getProjects())[r];if(o){if(n){const{configuration:e}=n;if(e||!o.targets)return;const t=o.targets?o.targets[n.name].configurations:void 0;if(!t)return;return Promise.all(Object.keys(t).map((async e=>this.createNxProjectTreeItem({target:{...n,configuration:e},project:r,root:o.root},e))))}return o.targets?Promise.all(Object.keys(o.targets).map((async e=>this.createNxProjectTreeItem({target:{name:e},project:r,root:o.root},e,Boolean(o.targets?.[e].configurations))))):void 0}}async runTask(e){const{target:t,project:n}=e.nxProject;if(!t)return;const r=[];t.configuration&&r.push(`--configuration=${t.configuration}`),this.cliTaskProvider.executeTask({command:t.name,positional:n,flags:r})}async revealInExplorer(e){e.resourceUri&&s.commands.executeCommand("revealInExplorer",e.resourceUri)}async editWorkspaceJson(e){return(0,o.revealNxProject)(e.nxProject.project,e.nxProject.root,e.nxProject.target)}async refreshNxProjectsTree(){this.refresh()}}t.NxProjectTreeProvider=c},55489:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(70655);r.__exportStar(n(47162),t),r.__exportStar(n(68407),t)},47162:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RunTargetTreeItem=t.commandList=void 0;const r=n(55441),o=n(71017),a=n(89496);t.commandList=async()=>["generate","run",...await async function(){const{workspace:e}=await(0,r.nxWorkspace)(),t=Object.values(e.projects).reduce(((e,t)=>{for(const n of Object.keys(t.targets??{}))e.add(n);return e}),new Set);return Array.from(t)}()];class s extends a.TreeItem{constructor(e,t,n,r,o){super(t,a.TreeItemCollapsibleState.None),this.configurationFilePath=e,this.route=t,this.extensionPath=n,this.generatorType=r,this.generator=o,this.command={title:this.route,command:"nxConsole.revealWebViewPanel",tooltip:"",arguments:[this]},this.iconPath=s.getIconUriForRoute(this.extensionPath)}revealWorkspaceRoute(e){(e.visible?e.reveal(this,{select:!0,focus:!0}):Promise.reject()).then((()=>{}),(()=>{}))}static getIconUriForRoute(e){return{light:a.Uri.file((0,o.join)(e,"assets","nx-cli-light.svg")),dark:a.Uri.file((0,o.join)(e,"assets","nx-cli-dark.svg"))}}}t.RunTargetTreeItem=s},68407:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RunTargetTreeProvider=t.CHANGE_WORKSPACE=t.LOCATE_YOUR_WORKSPACE=void 0;const r=n(57121),o=n(92159),a=n(71017),s=n(89496),i=n(47162),c=new s.TreeItem("Scanning for your Nx Workspace...");t.LOCATE_YOUR_WORKSPACE=new s.TreeItem("Select workspace"),t.LOCATE_YOUR_WORKSPACE.command={tooltip:"Select an workspace directory to open",title:"Select workspace",command:"nxConsole.selectWorkspaceManually"},t.CHANGE_WORKSPACE=new s.TreeItem("Change workspace"),t.CHANGE_WORKSPACE.command={tooltip:"Select an workspace json file to open",title:"Change workspace",command:"nxConsole.selectWorkspaceManually"};class l extends r.AbstractTreeProvider{constructor(e){super(),this.context=e,this.scanning=Boolean(o.WorkspaceConfigurationStore.instance.get("nxWorkspacePath","")),this.refreshRunTargetTree=async()=>{this.refresh()};const n=e.extensionPath;this.extensionPath=n,t.LOCATE_YOUR_WORKSPACE.iconPath={light:(0,a.join)(n,"assets","nx-console-light.svg"),dark:(0,a.join)(n,"assets","nx-console-dark.svg")},t.CHANGE_WORKSPACE.iconPath={light:(0,a.join)(n,"assets","nx-console-light.svg"),dark:(0,a.join)(n,"assets","nx-console-dark.svg")},e.subscriptions.push(s.commands.registerCommand("nxConsole.refreshRunTargetTree",this.refreshRunTargetTree))}getParent(){return null}endScan(){this.scanning=!1,this.refresh()}async getChildren(){const e=o.WorkspaceConfigurationStore.instance.get("nxWorkspacePath","");return e?(t.CHANGE_WORKSPACE.description="Current: "+e,[...(await(0,i.commandList)()).map((t=>new i.RunTargetTreeItem(e,t,this.extensionPath))),t.CHANGE_WORKSPACE]):this.scanning?[c]:[t.LOCATE_YOUR_WORKSPACE]}}t.RunTargetTreeProvider=l},55441:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(70655);r.__exportStar(n(73014),t),r.__exportStar(n(71427),t),r.__exportStar(n(64186),t),r.__exportStar(n(98313),t),r.__exportStar(n(43222),t),r.__exportStar(n(4317),t)},4317:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.findProjectWithPath=void 0;const r=n(92159),o=n(71017),a=n(98313);t.findProjectWithPath=async function(e){if(!e)return null;const t=r.WorkspaceConfigurationStore.instance.get("nxWorkspacePath",""),{workspace:n}=await(0,a.nxWorkspace)(),s=Object.entries(n.projects).find((([,n])=>{const r=(0,o.join)(t,n.root||n.sourceRoot||"");if(r===e)return!0;const a=(0,o.relative)(r,e);return a&&!a.startsWith("..")&&!(0,o.isAbsolute)(a)}));return s?{name:s[0],...s[1]}:null}},73014:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getProjectLocations=void 0;const r=n(55423);function o(e){return(0,r.isObjectLiteralExpression)(e)?e.properties:(0,r.isPropertyAssignment)(e)?o(e.initializer):void 0}function a(e){if((0,r.isPropertyAssignment)(e)&&(0,r.isStringLiteral)(e.name))return e.name.text}function s(e,t,n){const r=o(e)?.find((e=>{const n=a(e);return t.some((e=>n===e))}));if(r)return o(r)?.reduce(((e,t)=>{const r=a(t);if(!r)return e;e[r]={position:t.getStart(n)};const o=s(t,["configurations"],n);return o&&(e[r].configurations=o),e}),{})}t.getProjectLocations=function(e,t=""){const n={},i=(0,r.parseJsonText)("workspace.json",e.getText()),c=i.statements[0],l=o(c.expression)?.find((e=>"projects"===a(e)));return l?o(l.initializer)?.forEach((e=>{const t=a(e);var o;t&&e&&(o=e,(0,r.isPropertyAssignment)(o)&&(0,r.isStringLiteral)(o.initializer)?n[t]={position:e.getStart(i),projectPath:e.initializer.getText(i).replace(/"/g,"")}:n[t]={position:e.getStart(i),targets:s(e,["architect","targets"],i)??{}})})):n[t]={position:0,targets:s(c.expression,["architect","targets"],i)??{}},n}},8734:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getNxWorkspaceConfig=void 0;const r=n(57121),o=n(71017),a=n(92164),s=n(43222);async function i(e,t){let n;n="nx"===e?(await(0,r.readAndCacheJsonFile)("workspace.json",t)).json:(await(0,r.readAndCacheJsonFile)("angular.json",t)).json;const a=(await(0,r.readAndCacheJsonFile)("nx.json",t)).json;return{workspaceConfiguration:{...n,...a,projects:{...a.projects??{},...n.projects}},configPath:"nx"===e?(0,o.join)(t,"workspace.json"):(0,o.join)(t,"angular.json")}}t.getNxWorkspaceConfig=async function(e,t,n){const r=await(0,s.nxVersion)();if(r<12)return i(t,e);try{const[s,c]=await Promise.all([(0,a.getNxWorkspacePackageFileUtils)(),(0,a.getNxProjectGraph)()]),l=s.workspaceFileName();let p;try{p=s.readWorkspaceConfig({format:t,path:e})}catch{p=(await i(t,e)).workspaceConfiguration}let d=null;try{if(!n)throw"No project graph support";d=r<13?c.createProjectGraph():await c.createProjectGraphAsync()}catch{}return function(e,t){if(t)for(const[n,r]of Object.entries(t.nodes)){const t=e.projects[n];e.projects[n]=t?{...t,targets:r.data.targets??{}}:{root:r.data.root,targets:r.data.targets??{},name:n,tags:r.data.tags??[]}}}(p,d),{workspaceConfiguration:p,configPath:(0,o.join)(e,l)}}catch(n){return i(t,e)}}},92164:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.findNxPackagePath=t.getNxWorkspacePackageFileUtils=t.getNxProjectGraph=void 0;const r=n(32414),o=n(57121),a=n(92159),s=n(22037),i=n(71017);async function c(e,t,n){try{if(!e)throw"local Nx dependency not found";"win32"===(0,s.platform)()&&(e=e.replace(/\\/g,"/"));const t=require(e);return(0,o.getOutputChannel)().appendLine(`Using local Nx package at ${e}`),t}catch(n){return(0,o.getOutputChannel)().appendLine(`Unable to load the ${e} dependency from the workspace. Falling back to extension dependency\n${n}\n    `),t}}async function l(e,t){const n=e=>(0,i.join)(e,t),a=await(0,r.workspaceDependencyPath)(e,"nx");if(a){const e=n(a);if(await(0,o.fileExists)(e))return e}const s=await(0,r.workspaceDependencyPath)(e,"@nrwl/workspace");if(s){const e=n(s);if(await(0,o.fileExists)(e))return e}}t.getNxProjectGraph=async function(){const e=a.WorkspaceConfigurationStore.instance.get("nxWorkspacePath","");let t=await l(e,(0,i.join)("src","project-graph","project-graph.js"));return t||(t=await l(e,(0,i.join)("src","core","project-graph","project-graph.js"))),c(t,await Promise.resolve().then((()=>n(51031))))},t.getNxWorkspacePackageFileUtils=async function(){const e=a.WorkspaceConfigurationStore.instance.get("nxWorkspacePath","");let t=await l(e,(0,i.join)("src","project-graph","file-utils.js"));return t||(t=await l(e,(0,i.join)("src","core","file-utils.js"))),c(t,await Promise.resolve().then((()=>n(28919))))},t.findNxPackagePath=l},43222:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.nxVersion=void 0;const r=n(92159),o=n(92164);let a,s=!1;t.nxVersion=async function(){if(!s){const e=r.WorkspaceConfigurationStore.instance.get("nxWorkspacePath",""),t=await(0,o.findNxPackagePath)(e,"package.json");if(!t)return 0;a=require(t),s=!0}if(!a)return 0;const e=a.version.split(".")[0];return e?+e:0}},98313:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.nxWorkspace=void 0;const r=n(57121),o=n(92159),a=n(71017),s=n(72872),i=n(89496),c=n(8734);var l;!function(e){e[e.not_started=0]="not_started",e[e.in_progress=1]="in_progress",e[e.cached=2]="cached"}(l||(l={}));let p=new s.ReplaySubject,d=l.not_started;t.nxWorkspace=async function(e){if(e){d=l.not_started,p=new s.ReplaySubject;const e=o.WorkspaceConfigurationStore.instance.get("nxWorkspacePath","");(0,r.clearJsonCache)("angular.json",e),(0,r.clearJsonCache)("workspace.json",e)}return(0,s.firstValueFrom)((0,s.iif)((()=>d===l.not_started),(0,s.of)({}).pipe((0,s.tap)((()=>{d=l.in_progress})),(0,s.switchMap)((()=>(0,s.from)(async function(){const e=o.WorkspaceConfigurationStore.instance.get("nxWorkspacePath",""),t=await(0,r.fileExists)((0,a.join)(e,"angular.json")),n=await(0,r.checkIsNxWorkspace)(e),s=await(0,c.getNxWorkspaceConfig)(e,t?"angularCli":"nx",n),l=await(0,r.fileExists)((0,a.join)(e,"lerna.json"));try{return{validWorkspaceJson:!0,workspaceType:t?"ng":"nx",workspace:(0,r.toWorkspaceFormat)(s.workspaceConfiguration),configurationFilePath:s.configPath,isLerna:l,workspaceLayout:{appsDir:s.workspaceConfiguration.workspaceLayout?.appsDir??l?"packages":"apps",libsDir:s.workspaceConfiguration.workspaceLayout?.libsDir??l?"packages":"libs"},workspacePath:e}}catch(t){const n="Invalid workspace: "+e;i.window.showErrorMessage(n,"Show Error").then((e=>{e&&(0,r.getOutputChannel)().show()})),(0,r.getOutputChannel)().appendLine(n);const o=t.toString?t.toString():JSON.stringify(t);return(0,r.getOutputChannel)().appendLine(o),(0,r.getTelemetry)().exception(o),{validWorkspaceJson:!1,workspaceType:"nx",workspace:{npmScope:"@nx-console",projects:{},version:2},configurationFilePath:"",workspacePath:e,isLerna:!1,workspaceLayout:{appsDir:"apps",libsDir:"libs"}}}}()))),(0,s.tap)((e=>{p.next(e),d=l.cached}))),p))}},71427:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.revealNxProject=void 0;const r=n(57121),o=n(92159),a=n(71017),s=n(89496),i=n(73014);t.revealNxProject=async function(e,t,n){const c=o.WorkspaceConfigurationStore.instance.get("nxWorkspacePath",""),l=await(0,r.buildProjectPath)(c,t),p=(0,a.join)(c,"workspace.json"),d=(0,a.join)(c,"angular.json");let u=c;await(0,r.fileExists)(d)?u=d:l?u=l:await(0,r.fileExists)(p)&&(u=p);const f=await s.workspace.openTextDocument(s.Uri.file(u)),h=(0,i.getProjectLocations)(f,e);let m=h[e].position;if(n){const t=h[e].targets?.[n.name];if(t){const e=t.configurations?.[n.configuration||""];m=e?e.position:t.position}}const g=f.positionAt(m);await s.window.showTextDocument(f,{selection:new s.Selection(g,g)})}},64186:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WorkspaceCodeLensProvider=t.ProjectCodeLens=t.TargetCodeLens=void 0;const r=n(89496),o=n(98313),a=n(73014),s=n(92159),i=n(57121);class c extends r.CodeLens{constructor(e,t,n,r,o){super(e),this.workspaceType=t,this.project=n,this.target=r,this.configuration=o}}t.TargetCodeLens=c;class l extends r.CodeLens{constructor(e,t,n){super(e),this.project=t,this.projectPath=n}}t.ProjectCodeLens=l,t.WorkspaceCodeLensProvider=class{constructor(e){this.context=e,this.registerWorkspaceCodeLensProvider(e),this.watchWorkspaceCodeLensConfigChange(e)}async provideCodeLenses(e){const t=[];let n="";const{workspace:r}=await(0,o.nxWorkspace)();if(e.uri.path.endsWith("project.json"))for(const[t,o]of Object.entries(r.projects))if(e.uri.path.replace(/\\/g,"/").endsWith(`${o.root}/project.json`)){n=t;break}const i=(0,a.getProjectLocations)(e,n),{validWorkspaceJson:c,workspaceType:l}=await(0,o.nxWorkspace)();if(c){for(const n in i){const r=i[n];await this.buildProjectLenses(r,e,t,n,s.WorkspaceConfigurationStore.instance.get("nxWorkspacePath","")),this.buildTargetLenses(r,e,t,l,n)}return t}}async buildProjectLenses(e,t,n,o,a){if(!e.projectPath)return;const s=t.positionAt(e.position);n.push(new l(new r.Range(s,s),o,await(0,i.buildProjectPath)(a,e.projectPath)??""))}buildTargetLenses(e,t,n,o,a){const s=e.targets;for(const e in s){const i=t.positionAt(s[e].position);n.push(new c(new r.Range(i,i),o,a,e));const l=s[e].configurations;if(l)for(const s in l){const i=t.positionAt(l[s].position);n.push(new c(new r.Range(i,i),o,a,e,s))}}}resolveCodeLens(e){if(e instanceof c){const t={command:`${e.workspaceType}.run`,title:e.configuration?`${e.workspaceType} run ${e.project}:${e.target}:${e.configuration}`:`${e.workspaceType} run ${e.project}:${e.target}`,arguments:[e.project,e.target,e.configuration,!1]};return e.command=t,e}if(e instanceof l){const t={command:"vscode.open",title:`Go to "${e.project}" configuration`,arguments:[r.Uri.file(e.projectPath)]};return e.command=t,e}return null}registerWorkspaceCodeLensProvider(e){s.GlobalConfigurationStore.instance.get("enableWorkspaceConfigCodeLens")&&(this.codeLensProvider=r.languages.registerCodeLensProvider({pattern:"**/{workspace,angular,project}.json"},this),e.subscriptions.push(this.codeLensProvider))}watchWorkspaceCodeLensConfigChange(e){e.subscriptions.push(r.workspace.onDidChangeConfiguration((e=>{if(e.affectsConfiguration(s.GlobalConfigurationStore.configurationSection)){const e=s.GlobalConfigurationStore.instance.get("enableWorkspaceConfigCodeLens");e&&!this.codeLensProvider?this.registerWorkspaceCodeLensProvider(this.context):!e&&this.codeLensProvider&&(this.codeLensProvider.dispose(),this.codeLensProvider=null)}})))}}},15424:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(70655).__exportStar(n(73536),t)},72851:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getProjectGraphOutput=t.createProjectGraph=void 0;const r=n(14560),o=n(57121),a=n(92159),s=n(32081),i=n(60703);let c;function l(){const e=c??".",t=`${e}/project-graph.html`;return{directory:e,relativePath:"."+t.replace(a.WorkspaceConfigurationStore.instance.get("nxWorkspacePath",""),""),fullPath:t}}t.createProjectGraph=async function(){return new Promise(((e,t)=>{c||(c=i({name:"nx-console-project-graph",cwd:a.WorkspaceConfigurationStore.instance.get("nxWorkspacePath","")}));const n=a.WorkspaceConfigurationStore.instance.get("nxWorkspacePath",""),p=(0,r.detectPackageManager)(n),d=`${(0,r.getPackageManagerCommand)(p).exec} nx dep-graph --file ${l().relativePath}`;(0,o.getOutputChannel)().appendLine(`Generating graph with command: \`${d}\``);try{(0,s.execSync)(d,{cwd:n}),e()}catch(e){(0,o.getOutputChannel)().appendLine("Unable to create project graph: "+e.toString()),t()}}))},t.getProjectGraphOutput=l},38632:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.MessageType=void 0,(n=t.MessageType||(t.MessageType={})).focus="FOCUS",n.select="SELECT"},10951:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GraphWebView=void 0;const r=n(89496),o=n(4531),a=n(14414),s=n(56634);t.GraphWebView=class{constructor(){a.graphService.onTransition((async e=>{if(e.changed&&this.panel){if(e.matches("loading"))this.panel.webview.html=(0,s.loadSpinner)();else if(e.matches("content"))this.panel.webview.html=await(0,s.loadHtml)(this.panel);else if(e.matches("error"))this.panel.webview.html=(0,s.loadError)();else if(e.matches("no_project"))this.panel.webview.html=(0,s.loadNoProject)();else if(e.matches("viewReady")){const t=e.context.project;this.panel?.webview.postMessage(t)}setTimeout((()=>{a.graphService.execute(e)}))}})),a.graphService.start()}dispose(){a.graphService.stop()}_webview(){this.panel||(this.panel=r.window.createWebviewPanel("graph","Nx Graph",{viewColumn:r.ViewColumn.Active,preserveFocus:!1},{enableScripts:!0,retainContextWhenHidden:!0}),this.panel.onDidDispose((()=>{this.panel=void 0,a.graphService.send("VIEW_DESTROYED")})),this.panel.webview.onDidReceiveMessage((async e=>{"ready"===e.command&&(await(0,o.waitFor)(a.graphService,(e=>e.matches("content"))),a.graphService.send("VIEW_READY")),"refresh"===e.command&&r.commands.executeCommand("nxConsole.refreshWorkspace")})),a.graphService.send("GET_CONTENT"))}async projectInWebview(e,t){this.panel||this._webview(),e?(this.panel?.reveal(),a.graphService.send("PROJECT_SELECTED",{data:{type:t,projectName:e}})):a.graphService.send("NO_PROJECT")}refresh(){a.graphService.send("REFRESH")}}},14414:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.graphService=t.graphMachine=t.ViewStatus=t.State=void 0;const r=n(39774),o=n(41428),a=n(72851);var s,i;!function(e){e.init="init",e.loading="loading",e.loaded="loaded",e.error="error"}(s=t.State||(t.State={})),(i=t.ViewStatus||(t.ViewStatus={})).ready="ready",i.destroyed="destroyed",t.graphMachine=(0,r.createMachine)({context:{state:s.init,project:null},tsTypes:{},schema:{context:{},services:{},events:{}},id:"Project Graph",initial:"init",on:{REFRESH:{actions:"refreshData",target:".content"},PROJECT_SELECTED:{actions:"projectSelected"},NO_PROJECT:{target:".no_project"}},states:{init:{entry:"log",on:{GET_CONTENT:{target:"content"}}},content:{entry:"log",always:{cond:"loadGraph",target:"loading"},on:{VIEW_READY:{target:"viewReady"}}},loading:{entry:[(0,r.assign)({state:s.loading}),"log"],invoke:{src:"generateContent",id:"loadingContent",onDone:[{actions:"contentLoaded",target:"content"}],onError:[{actions:"loadingFailed",target:"error"}]}},error:{entry:"log",on:{GET_CONTENT:{target:"content"}}},no_project:{on:{GET_CONTENT:{target:"content"}}},viewReady:{entry:"log",on:{VIEW_DESTROYED:{target:"viewDestroyed"}}},viewDestroyed:{entry:["log","refreshData","clearProject"],on:{GET_CONTENT:{target:"content"}}}}},{services:{generateContent:async()=>(0,a.createProjectGraph)()},actions:{log:(0,o.log)(((e,t)=>t),"Graph"),refreshData:(0,r.assign)({state:()=>s.init}),contentLoaded:(0,r.assign)({state:()=>s.loaded}),loadingFailed:(0,r.assign)({state:()=>s.error}),clearProject:(0,r.assign)({project:e=>null}),projectSelected:(0,r.assign)({project:(e,{data:t})=>({projectName:t.projectName,type:t.type})})},guards:{loadGraph:e=>e.state!==s.loaded}}),t.graphService=(0,r.interpret)(t.graphMachine,{execute:!1})},56634:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loadHtml=t.loadSpinner=t.loadError=t.loadNoProject=void 0;const r=n(89496),o=n(38632),a=n(72851),s=String.raw;t.loadNoProject=function(){return s`
    <script>
      const vscodeApi = acquireVsCodeApi();

      function refresh() {
        vscodeApi.postMessage({
          command: 'refresh',
        });
      }
    </script>
    <p>
      Unable to find the selected project in the workspace. Please make sure
      that node_modules is installed and that the Nx projects are loaded
      properly.
    </p>
    <p>
      If node_modules are installed, click
      <a onclick="refresh()" style="cursor: pointer">here</a> to reload the
      projects in the workspace.
    </p>
  `},t.loadError=function(){return s`
    <p>
      Unable to load the project graph. Please check the output for errors and
      try again.
    </p>
  `},t.loadSpinner=function(){return s`
    <style>
      .lds-roller {
        display: inline-block;
        position: relative;
        width: 80px;
        height: 80px;
      }

      .lds-roller div {
        animation: lds-roller 1.2s cubic-bezier(0.5, 0, 0.5, 1) infinite;
        transform-origin: 40px 40px;
      }

      .lds-roller div:after {
        content: ' ';
        display: block;
        position: absolute;
        width: 7px;
        height: 7px;
        border-radius: 50%;
        background: var(--vscode-editor-foreground);
        margin: -4px 0 0 -4px;
      }

      .lds-roller div:nth-child(1) {
        animation-delay: -0.036s;
      }

      .lds-roller div:nth-child(1):after {
        top: 63px;
        left: 63px;
      }

      .lds-roller div:nth-child(2) {
        animation-delay: -0.072s;
      }

      .lds-roller div:nth-child(2):after {
        top: 68px;
        left: 56px;
      }

      .lds-roller div:nth-child(3) {
        animation-delay: -0.108s;
      }

      .lds-roller div:nth-child(3):after {
        top: 71px;
        left: 48px;
      }

      .lds-roller div:nth-child(4) {
        animation-delay: -0.144s;
      }

      .lds-roller div:nth-child(4):after {
        top: 72px;
        left: 40px;
      }

      .lds-roller div:nth-child(5) {
        animation-delay: -0.18s;
      }

      .lds-roller div:nth-child(5):after {
        top: 71px;
        left: 32px;
      }

      .lds-roller div:nth-child(6) {
        animation-delay: -0.216s;
      }

      .lds-roller div:nth-child(6):after {
        top: 68px;
        left: 24px;
      }

      .lds-roller div:nth-child(7) {
        animation-delay: -0.252s;
      }

      .lds-roller div:nth-child(7):after {
        top: 63px;
        left: 17px;
      }

      .lds-roller div:nth-child(8) {
        animation-delay: -0.288s;
      }

      .lds-roller div:nth-child(8):after {
        top: 56px;
        left: 12px;
      }

      @keyframes lds-roller {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }

      main {
        display: flex;
        align-items: center;
        justify-content: center;
        height: 100vh;
      }
    </style>
    <main>
      <div class="lds-roller">
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
      </div>
    </main>
  `},t.loadHtml=async function(e){const t=(0,a.getProjectGraphOutput)(),n=r.Uri.file(t.directory),i=r.Uri.file(t.fullPath);let c=(await r.workspace.fs.readFile(i)).toString();return c=c.replace(/static\//g,`${e.webview.asWebviewUri(n)}/static/`),c=c.replace("</head>",s`
      <style>
        #sidebar {
          display: none;
        }

        #no-projects-chosen {
          display: none
        }

        body {
          background-color: var(--vscode-settings-editor-background) !important;
        }
        .nx-select-project {
          padding: 12px;
        }
      </style>
      <script>${`\n(function () {\n      const vscode = acquireVsCodeApi();\n\n      const noProjectElement = document.createElement('p');\n      noProjectElement.classList.add('nx-select-project');\n      noProjectElement.innerText = "Please select or focus a Nx project";\n\n      vscode.postMessage({\n        command: 'ready',\n      })\n\n      function nx12(data) {\n        const projectCheckbox = document.querySelector(\`input[value="\${data.projectName}"]\`);\n        if (data.type === "${o.MessageType.focus}") {\n          projectCheckbox.parentElement.parentElement.querySelector('button').click();\n        } else if (data.type === "${o.MessageType.select}") {\n          projectCheckbox.click();\n        }\n      }\n\n      window.addEventListener('message', ({data}) => {\n        if (!data) {\n          document.body.prepend(noProjectElement);\n          return;\n        }\n\n        setTimeout(() => {\n          try {\n            document.body.removeChild(noProjectElement);\n          } catch(e) {\n            //noop\n          }\n          const projectElement = document.querySelector(\`[data-project="\${data.projectName}"]\`);\n\n          if (!projectElement) {\n            return nx12(data);\n          }\n\n          if (data.type === "${o.MessageType.focus}") {\n            projectElement.parentElement.querySelector('button').click();\n          } else if (data.type === "${o.MessageType.select}") {\n            projectElement.click();\n          }\n        })\n      })\n    }())\n  `}</script>
      </head>`),c}},73536:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.projectGraph=void 0;const r=n(55441),o=n(89496),a=n(38632),s=n(10951);async function i(e,t,n){let a;a=t?t.fsPath:o.window.activeTextEditor?.document.fileName;const s=await(0,r.findProjectWithPath)(a);e.projectInWebview(s?.name,n)}t.projectGraph=function(){const e=new s.GraphWebView;return o.Disposable.from(e,o.commands.registerCommand("nx.graph.refresh",(()=>{e.refresh()})),o.commands.registerCommand("nx.graph.focus",(async t=>{await i(e,t,a.MessageType.focus)})),o.commands.registerCommand("nx.graph.select",(async t=>{await i(e,t,a.MessageType.select)})),o.commands.registerCommand("nx.graph.focus.button",(async({nxProject:{project:t}})=>{e.projectInWebview(t,a.MessageType.focus)})),o.commands.registerCommand("nx.graph.select.button",(async({nxProject:{project:t}})=>{e.projectInWebview(t,a.MessageType.select)})))}},49018:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(70655);r.__exportStar(n(50808),t),r.__exportStar(n(15174),t),r.__exportStar(n(21167),t),r.__exportStar(n(34455),t),r.__exportStar(n(8703),t)},21167:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.selectCliProject=t.getCliProjectFromUri=t.registerCliTaskCommands=void 0;const r=n(89496),o=n(55441),a=n(31203),s=n(55489),i=n(34455),c=n(74756),l=n(47812),p=n(8703),d=n(57121),u=["build","deploy","e2e","lint","serve","test","xi18n"];let f;async function h(e,t,n,a,i){if(!f.getWorkspacePath())return void r.window.showErrorMessage("Nx Console requires a workspace be set to perform this action");const{validWorkspaceJson:c,configurationFilePath:l}=await(0,o.nxWorkspace)();if(!c)return void r.window.showErrorMessage("Invalid configuration file");const p=new s.RunTargetTreeItem(l,e,t,a,i);r.commands.executeCommand("nxConsole.revealWebViewPanel",p,n)}async function m(e,t,n,s,i=!0){let p;s?p=[`--configuration=${s}`]:i||(p=[]);const{validWorkspaceJson:d,workspace:u,workspaceType:h}=await(0,o.nxWorkspace)();if(!t){const n=d?await w(e,u):void 0;if(!n)return;t=n.projectName}const m="run"===e;if(!n)if(m){if(!(n=await async function(e){return r.window.showQuickPick(e,{placeHolder:"Target to run"})}(Object.keys(u.projects[t].targets||{}))))return}else n=e;const y=await(0,a.verifyBuilderDefinition)(t,n,u,h),{validBuilder:x,options:v,configurations:k}=y;let j=[...v];x&&(p||(k.length&&(j=[{name:"configuration",isRequired:!1,description:'A named build target as specified in the "configurations" section of your project config.',type:l.OptionType.String,enum:k,aliases:[]},...j]),p=await(0,c.selectFlags)(m?`${e} ${t}:${g(n)}`:`${e} ${t}`,j,h)),void 0!==p&&f.executeTask({positional:m?`${t}:${g(n)}`:t,command:e,flags:p}))}function g(e){return e.match(/\s/g)?`"${e}"`:e}async function y(e){return(await(0,o.findProjectWithPath)(e.fsPath))?.name}async function w(e,t){const n=(await f.getProjectEntries(t)).filter((([,{targets:e}])=>Boolean(e))).flatMap((([e,{targets:t,root:n}])=>({project:e,targets:t,root:n}))).filter((({targets:t})=>Boolean(t&&t[e])||"run"===e)).map((({project:t,targets:n,root:r})=>new i.CliTaskQuickPickItem(t,r,n[e],e,t)));if(n.length)return r.window.showQuickPick(n,{placeHolder:`Project to ${e}`});r.window.showInformationMessage(`No projects have a target command for ${e}`)}t.registerCliTaskCommands=function(e,t){f=t,u.forEach((t=>{e.subscriptions.push(r.commands.registerCommand(`ng.${t}`,(()=>m(t))),r.commands.registerCommand(`ng.${t}.ui`,(()=>h(t,e.extensionPath))),r.commands.registerCommand(`nx.${t}`,(()=>m(t))),r.commands.registerCommand(`nx.${t}.ui`,(()=>h(t,e.extensionPath))))})),["ng","nx"].forEach((async t=>{r.commands.registerCommand(`${t}.run`,((e,t,n,r)=>{m("run",e,t,n,r)})),r.commands.registerCommand(`${t}.run.fileexplorer`,(async e=>m("run",await y(e))));const n=await(0,o.nxVersion)();n&&n>=8&&(r.commands.registerCommand(`${t}.move.fileexplorer`,(async t=>{const n=await(async()=>{const e=f.getWorkspacePath();return(await(0,d.getGenerators)(e,await f.getProjects())).find((e=>"@nrwl/angular:move"===e.name))?"@nrwl/angular:move":"@nrwl/workspace:move"})();h("generate",e.extensionPath,t,l.GeneratorType.Other,n)})),r.commands.registerCommand(`${t}.remove.fileexplorer`,(async t=>{const n=await(async()=>{const e=f.getWorkspacePath();return(await(0,d.getGenerators)(e,await f.getProjects())).find((e=>"@nrwl/angular:remove"===e.name))?"@nrwl/angular:remove":"@nrwl/workspace:remove"})();h("generate",e.extensionPath,t,l.GeneratorType.Other,n)}))),r.commands.registerCommand(`${t}.generate`,(()=>async function(){const{validWorkspaceJson:e,workspaceType:t,workspacePath:n}=await(0,o.nxWorkspace)();if(!e)return;const r=await(0,p.selectGenerator)(n,t);if(!r)return;const a=await(0,c.selectFlags)(`generate ${r.positional}`,r.options,t);void 0!==a&&f.executeTask({positional:r.positional,command:"generate",flags:a})}())),r.commands.registerCommand(`${t}.generate.ui`,(()=>h("generate",e.extensionPath))),r.commands.registerCommand(`${t}.generate.ui.fileexplorer`,(t=>h("generate",e.extensionPath,t))),r.commands.registerCommand(`${t}.generate.ui.app`,(t=>{h("generate",e.extensionPath,t,l.GeneratorType.Application)})),r.commands.registerCommand(`${t}.generate.ui.lib`,(t=>{h("generate",e.extensionPath,t,l.GeneratorType.Library)})),r.commands.registerCommand(`${t}.generate.ui.app.fileexplorer`,(t=>{h("generate",e.extensionPath,t,l.GeneratorType.Application)})),r.commands.registerCommand(`${t}.generate.ui.lib.fileexplorer`,(t=>{h("generate",e.extensionPath,t,l.GeneratorType.Library)})),r.commands.registerCommand(`${t}.run.target`,(async()=>{const e=await r.window.showQuickPick(async function(){const{workspace:e}=await(0,o.nxWorkspace)(),t=Object.values(e.projects).reduce(((e,t)=>{for(const n of Object.keys(t.targets??{}))e.add(n);return e}),new Set);return Array.from(t)}());if(!e)return;const t=await r.window.showQuickPick(async function(e){const{workspace:t}=await(0,o.nxWorkspace)(),n=[];for(const[r,o]of Object.entries(t.projects))(o.targets??{})[e]&&n.push(r);return n}(e));t&&m("run",t,e)}))}))},t.getCliProjectFromUri=y,t.selectCliProject=w},32153:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CliTaskFlagQuickPickItem=void 0,t.CliTaskFlagQuickPickItem=class{constructor(e,t="",n,r){this.flagName=e,this.detail=t,this.option=n,this.label=r}}},50808:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CliTaskProvider=void 0;const r=n(47812),o=n(57121),a=n(92159),s=n(57081),i=n(55441),c=n(89496),l=n(48445),p=n(62078);t.CliTaskProvider=class{constructor(){c.tasks.onDidEndTaskProcess((()=>{this.currentDryRun=void 0,this.deferredDryRun&&(this.executeTask(this.deferredDryRun),this.deferredDryRun=void 0)}))}getWorkspacePath(){return a.WorkspaceConfigurationStore.instance.get("nxWorkspacePath","")}getWorkspaceJsonPath(){return a.WorkspaceConfigurationStore.instance.get("nxWorkspacePath","")}provideTasks(){return null}async resolveTask(e){if(this.getWorkspacePath()&&e.definition.command&&e.definition.project){const t=await this.createTask({command:e.definition.command,positional:e.definition.project,flags:Array.isArray(e.definition.flags)?e.definition.flags:[]});return t.definition=e.definition,t}}async createTask(e){return l.CliTask.create(e,this.getWorkspacePath())}async executeTask(e){s.NxConversion.instance.trackEvent(e.command);const t=e.flags.includes("--dry-run");if(t&&this.currentDryRun)return void(this.deferredDryRun=e);let n;const a=e.positional.match(r.WORKSPACE_GENERATOR_NAME_REGEX);return n="generate"===e.command&&a&&a.length>2?p.NxTask.create({command:`workspace-${a[1]}`,positional:a[2],flags:e.flags},this.getWorkspacePath()):await this.createTask(e),(0,o.getTelemetry)().featureUsed(e.command),c.tasks.executeTask(n).then((e=>{t&&(this.currentDryRun=e)}))}async getProjects(e){if(e)return e.projects;{const e=await(0,i.nxWorkspace)();return e.validWorkspaceJson&&e.workspace?e.workspace.projects:{}}}async getProjectNames(){return Object.keys(await this.getProjects()||{})}async getProjectEntries(e){return Object.entries(await this.getProjects(e)||{})}}},34455:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CliTaskQuickPickItem=void 0,t.CliTaskQuickPickItem=class{constructor(e,t,n,r,o){this.projectName=e,this.projectRoot=t,this.targetDef=n,this.command=r,this.label=o}}},48445:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CliTask=void 0;const r=n(57121),o=n(89496);class a extends o.Task{static async create(e,t){const{command:n}=e,s=function(e){const{positional:t,command:n,flags:r}=e;switch(n){case"add":case"build":case"lint":case"generate":case"run":case"serve":case"test":return[n,t,...r];default:return["run",`${t}:${n}`,...r]}}(e),i=await(0,r.checkIsNxWorkspace)(t),c=i?`nx ${s.join(" ")}`:`ng ${s.join(" ")}`,l=new a({...e,type:i?"nx":"ng"},o.TaskScope.Workspace,c,i?"nx":"ng",(0,r.getShellExecutionForConfig)({displayCommand:c,cwd:t}));switch(n){case"build":l.group=o.TaskGroup.Build,l.problemMatchers.push("$webpack-builder");break;default:l.group=o.TaskGroup.Test}return l}}t.CliTask=a},15174:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerNxCommands=void 0;const r=n(47812),o=n(89496),a=n(74756),s=n(55441),i=n(57121),c=n(62078);let l;async function p(){const{validWorkspaceJson:e,workspace:t}=await(0,s.nxWorkspace)();if(!e||!t)return;const n=Array.from(new Set(Object.entries(t.projects).map((([,e])=>Object.keys(e.targets||{}))).flat())).sort();if(n.length)return o.window.showQuickPick(n);o.window.showErrorMessage("None of your workspace projects have an architect or targets command")}t.registerNxCommands=function(e,t){l=t,e.subscriptions.push(o.commands.registerCommand("nx.affected",(async()=>{const e=await p();e&&f(e)})),...["apps","build","e2e","libs","lint","test"].map((e=>o.commands.registerCommand(`nx.affected.${e}`,(()=>f(e)))))),e.subscriptions.push(o.commands.registerCommand("nx.run-many",(()=>async function(){(0,i.getTelemetry)().featureUsed("affected-cli");const e=await p();if(!e)return;let t=u;const n=await async function(e){const{validWorkspaceJson:t,workspace:n}=await(0,s.nxWorkspace)();if(t&&n)return Array.from(new Set(Object.entries(n.projects).filter((([,t])=>t.targets&&t.targets[e])).map((([e])=>e)))).sort()}(e);n&&n.length&&(t=[{name:"projects",type:r.OptionType.Array,description:"Projects to run",aliases:[],isRequired:!1,enum:n},...u]);const d=await(0,a.selectFlags)("run-many",t,"nx",{target:e});if(void 0!==d){const e=c.NxTask.create({command:"run-many",flags:d},l.getWorkspacePath());o.tasks.executeTask(e)}}()))),e.subscriptions.push(o.commands.registerCommand("nx.list",(()=>async function(){(0,i.getTelemetry)().featureUsed("affected-cli");const e=c.NxTask.create({command:"list",flags:[]},l.getWorkspacePath());o.tasks.executeTask(e)}()))),e.subscriptions.push(o.commands.registerCommand("nx.migrate",(()=>async function(){(0,i.getTelemetry)().featureUsed("affected-cli");const e=c.NxTask.create({command:"migrate",flags:[]},l.getWorkspacePath());o.tasks.executeTask(e)}())))};const d=[{name:"base",type:r.OptionType.String,isRequired:!1,description:"Base of the current branch (usually main)"},{name:"head",type:r.OptionType.String,isRequired:!1,description:"Latest commit of the current branch (usually HEAD)"},{name:"parallel",type:r.OptionType.Boolean,description:"Parallelize the command",isRequired:!1,default:"false"},{name:"maxParallel",type:r.OptionType.Number,description:"Max number of parallel processes",isRequired:!1,default:3},{name:"only-failed",type:r.OptionType.Boolean,description:"Isolate projects which previously failed",isRequired:!1,default:"false"},{name:"all",type:r.OptionType.Boolean,description:"All projects",isRequired:!1},{name:"configuration",type:r.OptionType.String,isRequired:!1,description:"This is the configuration to use when performing tasks on projects"},{name:"exclude",type:r.OptionType.String,isRequired:!1,description:"Exclude certain projects from being processed"},{name:"files",type:r.OptionType.Array,isRequired:!1,description:"Manually specify changed files, delimited by commas"},{name:"skip-nx-cache",type:r.OptionType.Boolean,description:"Rerun the tasks even when the results are available in the cache",isRequired:!1,default:!1},{name:"verbose",type:r.OptionType.Boolean,isRequired:!1,description:"Print additional error stack trace on failure",default:!1}].map((e=>({...e,aliases:[]}))),u=[{name:"all",type:r.OptionType.Boolean,description:"All projects",isRequired:!1},{name:"parallel",type:r.OptionType.Boolean,description:"Parallelize the command",isRequired:!1,default:"false"},{name:"maxParallel",type:r.OptionType.Number,description:"Max number of parallel processes",isRequired:!1,default:3},{name:"only-failed",type:r.OptionType.Boolean,description:"Isolate projects which previously failed",isRequired:!1,default:"false"},{name:"configuration",type:r.OptionType.String,description:"This is the configuration to use when performing tasks on projects",isRequired:!1},{name:"skip-nx-cache",type:r.OptionType.Boolean,description:"Rerun the tasks even when the results are available in the cache",default:!1,isRequired:!1},{name:"with-deps",type:r.OptionType.Boolean,description:"Include dependencies of specified projects when computing what to run",isRequired:!1,default:!1},{name:"exclude",type:r.OptionType.String,isRequired:!1,description:"Exclude certain projects from being processed"},{name:"verbose",type:r.OptionType.Boolean,description:"Print additional error stack trace on failure",isRequired:!1,default:!1}].map((e=>({...e,aliases:[]})));async function f(e){(0,i.getTelemetry)().featureUsed("affected-cli");const{positional:t,command:n,flags:r}=await async function(e){switch(e){case"apps":case"libs":{const t=`affected:${e}`;return{command:t,flags:await(0,a.selectFlags)(t,d,"nx")}}default:{const t=`--target=${e}`;return{command:"affected",positional:t,flags:await(0,a.selectFlags)(`affected ${t}`,d,"nx")}}}}(e);if(void 0!==r){const e=c.NxTask.create({command:n,flags:r,positional:t},l.getWorkspacePath());o.tasks.executeTask(e)}}[{name:"watch",type:r.OptionType.Boolean,isRequired:!1,description:"Watch for changes to dep graph and update in-browser"},{name:"file",type:r.OptionType.String,isRequired:!1,description:"output file (e.g. --file=output.json)"},{name:"filter",type:r.OptionType.Array,isRequired:!1,description:"Use to limit the dependency graph to only show specific projects, list of projects delimited by commas."},{name:"exclude",type:r.OptionType.Array,isRequired:!1,description:"List of projects delimited by commas to exclude from the dependency graph."},{name:"host",type:r.OptionType.String,isRequired:!1,description:"Bind the dep graph server to a specific ip address."}].map((e=>({...e,aliases:[]})))},62078:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NxTask=void 0;const r=n(57121),o=n(89496);class a extends o.Task{static create(e,t){const{command:n,flags:s,positional:i}=e,c=`nx ${[n,...i?[i]:[],...s].join(" ")}`;return new a({...e,type:"nx"},o.TaskScope.Workspace,c,"nx",(0,r.getShellExecutionForConfig)({displayCommand:c,cwd:t}))}}t.NxTask=a},74756:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.selectFlags=void 0;const r=n(89496),o=n(32153);t.selectFlags=async function e(t,n,a,s={}){const i=Object.entries(s).map((([e,t])=>`--${e}=${t}`)),c=await async function(e,t){const n=[{picked:!0,alwaysShow:!0,label:`Execute: ${e}`},...t.map((e=>{const t=e.description??(Array.isArray(e.type)?e.type?.[0]:e.type);return new o.CliTaskFlagQuickPickItem(e.name,t,e,`${e.name}`)}))],a=await r.window.showQuickPick(n,{placeHolder:"Execute command or set flags"});return a?Boolean(a.option)?{flag:a}:{execute:!0}:{execute:!1}}(`${a} ${t} ${i.join(" ")}`,n);if(!c.flag)return c.execute?i:void 0;const l=await function(e){const t=`--${e.flagName}=...`;return"boolean"===e.option.type?r.window.showQuickPick(["true","false"],{placeHolder:t}):e.option.enum&&e.option.enum.length?r.window.showQuickPick([...e.option.enum.map(String)],{placeHolder:t,canPickMany:"array"===e.option.type}):r.window.showInputBox({placeHolder:t})}(c.flag);return l&&l.length>0?s[c.flag.flagName]=l:delete s[c.flag.flagName],e(t,n,a,s)}},8703:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.selectGenerator=t.getGeneratorOptions=void 0;const r=n(57121),o=n(92159),a=n(55441),s=n(89496);async function i(e,t,n,o,s){const i=await(0,r.readAndCacheJsonFile)(o),c=await async function(){const{workspace:e}=await(0,a.nxWorkspace)();let t=e.generators;if(!t)try{t=e.generators||{}}catch(e){t={}}return Object.keys(t).reduce(((e,n)=>{if(n.includes(":")){const[r,o]=n.split(":");e[r]||(e[r]={}),e[r][o]=t?.[n]}else{const r=n;e[r]||(e[r]={}),Object.keys(t?.[r]??{}).forEach((n=>{e[r][n]=t?.[r][n]}))}return e}),{})}(),l=c&&c[t]&&c[t][n];return await(0,r.normalizeSchema)(i.json,s,l)}t.getGeneratorOptions=i,t.selectGenerator=async function(e,t,n,c){const{workspace:l}=await(0,a.nxWorkspace)(),p=await(0,r.getGenerators)(e,l.projects);let d=p.filter((e=>!!e.data)).map((e=>{const t=e.data;return{description:t.description,label:`${t.collection} - ${t.name}`,generatorName:`${t.collection}:${t.name}`,collectionName:t.collection,collectionPath:e.path,generator:t}}));if(o.GlobalConfigurationStore.instance.get("enableGeneratorFilters")??1){const e=o.GlobalConfigurationStore.instance.get("generatorAllowlist")??[],t=o.GlobalConfigurationStore.instance.get("generatorBlocklist")??[];e.length>0&&(d=d.filter((t=>e.includes(t.generatorName)))),t.length>0&&(d=d.filter((e=>!t.includes(e.generatorName))))}if(n&&(d=d.filter((e=>e.generator.type===n))),p){const e=c?d.find((e=>e.generator.collection===c.collection&&e.generator.name===c.name)):await s.window.showQuickPick(d);if(e){const n=e.generator.options||await i(0,e.collectionName,e.generator.name,e.collectionPath,t),r=e.generatorName;return{...e.generator,options:n,command:"generate",positional:r,cliName:"nx"}}}}},31203:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(70655).__exportStar(n(20355),t)},20355:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.verifyBuilderDefinition=void 0;const r=n(47812),o=n(57121),a=n(92159),s=n(71017),i=n(89496),c=[{name:"with-deps",type:r.OptionType.Boolean,isRequired:!1,description:"Include dependencies of specified projects when computing what to run",default:!1},{name:"parallel",type:r.OptionType.Boolean,isRequired:!1,description:"Parallelize the command",default:"false"},{name:"maxParallel",type:r.OptionType.Number,isRequired:!1,description:"Max number of parallel processes",default:3},{name:"only-failed",type:r.OptionType.Boolean,isRequired:!1,description:"Isolate projects which previously failed",default:"false"},{name:"skip-nx-cache",type:r.OptionType.Boolean,isRequired:!1,description:"Rerun the tasks even when the results are available in the cache",default:!1},{name:"exclude",isRequired:!1,type:r.OptionType.String,description:"Exclude certain projects from being processed"}].map((e=>({...e,aliases:[]})));function l(){return a.WorkspaceConfigurationStore.instance.get("nxWorkspacePath","")}t.verifyBuilderDefinition=async function(e,t,n,r){const a=(((n.projects||{})[e]||{}).targets||{})[t]||{},p=Object.keys(a.configurations||{}),d=a.executor;if(!d)return i.window.showErrorMessage(`Please update ${e}'s ${t} definition to specify a builder.`,"See definition"),(0,o.getTelemetry)().exception("Builder part of architect definition not found"),{validBuilder:!1,configurations:p,builderName:d,options:[]};const u=await(0,o.readBuilderSchema)(l(),d,r,a.options);return u?{validBuilder:!0,builderName:d,configurations:p,options:await(0,o.fileExists)((0,s.join)(l(),"nx.json"))?[...c,...u]:u}:(i.window.showErrorMessage(`Builder specified for ${e} ${t} was not found in your dependencies. Check that specified builder is correct and has a corresponding entry in package.json`,"Show definition"),(0,o.getTelemetry)().exception("Specified builder not found in dependencies"),{validBuilder:!1,builderName:d,configurations:p,options:[]})}},45271:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(70655).__exportStar(n(42104),t)},69370:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTaskExecutionSchema=void 0;const r=n(57121),o=n(55441),a=n(31203),s=n(89496),i=n(49018);function c(e){return"project"===e.name||"projectName"===e.name||"projectName"===e.$default?.$source||"projects"===e["x-dropdown"]}t.getTaskExecutionSchema=async function(e,t="run",n,l,p){try{if(!e.getWorkspacePath())return;const{validWorkspaceJson:d,workspace:u,workspaceType:f}=await(0,o.nxWorkspace)();if(!d)return;switch(t.toLowerCase()){case"run":{const t=(await e.getProjectEntries()).filter((([,{targets:e}])=>Boolean(e))).flatMap((([e,{targets:t,root:n}])=>({project:e,targets:t,root:n}))).flatMap((({project:e,targets:t,root:n})=>[...Object.entries(t||{}).map((([t,r])=>({project:e,targetName:t,targetDef:r,root:n})))])).map((({project:e,targetName:t,targetDef:n,root:r})=>new i.CliTaskQuickPickItem(e,r,n,t,`${e}:${t}`)));return s.window.showQuickPick(t).then((async e=>{if(!e)return;const{validBuilder:t,options:n}=await(0,a.verifyBuilderDefinition)(e.projectName,e.command,u,f);return t?{...(0,r.readTargetDef)(e.command,e.targetDef,e.projectName),command:"run",positional:`${e.projectName}:${e.command}`,options:n,cliName:f}:void 0}))}case"generate":{const t=await(0,i.selectGenerator)(e.getWorkspacePath(),f,l,p?{collection:p.split(":")[0],name:p.split(":")[1]}:void 0);if(!t)return;for(const n of t.options)if(!n.enum&&c(n)){const t=await e.getProjectEntries();n.enum=n.items=t.map((e=>e[0])).sort()}const r=n?await async function(e,t,n){if(t){const r=await(0,o.findProjectWithPath)(t.fsPath),a=r&&r.name||void 0,s=n.getWorkspacePath();let i=t.fsPath.replace(s,"").replace(/\\/g,"/").replace(/^\//,"");const{workspaceLayout:l}=await(0,o.nxWorkspace)(),p=l.appsDir,d=l.libsDir;return(p&&"application"===e.name||"app"===e.name)&&(i=i.replace(p,"").replace(/^\//,"")),(d&&"library"===e.name||"lib"===e.name)&&(i=i.replace(d,"").replace(/^\//,"")),{project:a,projectName:a,path:i,...!(a&&e.options.some(c))&&{directory:i}}}}(t,n,e):void 0;return{...t,cliName:f,contextValues:r}}default:{const e=await(0,i.selectCliProject)(t,u);if(!e)return;const{validBuilder:n,options:o}=await(0,a.verifyBuilderDefinition)(e.projectName,t,u,f);if(!n)return;return{...(0,r.readTargetDef)(t,e.targetDef,e.projectName),options:o,positional:e.projectName,command:t,cliName:f}}}}catch(e){const t=e.toString?e.toString():JSON.stringify(e);(0,r.getOutputChannel)().appendLine(t),(0,r.getTelemetry)().exception(t),s.window.showErrorMessage("Nx Console encountered an error parsing your node modules","See details").then((e=>{e&&(0,r.getOutputChannel)().show()}))}}},42104:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getIframeHtml=t.createWebViewPanel=t.revealWebViewPanel=void 0;const r=n(71017),o=n(89496),a=n(57121),s=n(69370),i=n(57147);let c;function l(e,t,n,s){return c?(c.title=n,c.webview.postMessage({taskExecutionSchema:t}),c.reveal()):(c=o.window.createWebviewPanel("nx-console",n,o.ViewColumn.Active,{retainContextWhenHidden:!0,enableScripts:!0}),c.onDidDispose((()=>{c=void 0})),c.iconPath={light:o.Uri.file((0,r.join)(e.extensionPath,"assets","nx-console-light.svg")),dark:o.Uri.file((0,r.join)(e.extensionPath,"assets","nx-console-dark.svg"))},p(c,e,t),e.extensionMode===o.ExtensionMode.Development&&(0,i.watch)((0,r.join)(e.extensionPath,"assets","public","main.js"),(()=>{c&&(p(c,e,t),o.commands.executeCommand("workbench.action.webview.reloadWebviewAction"))})),c.webview.onDidReceiveMessage((e=>s.executeTask(e)))),(0,a.getTelemetry)().screenViewed(n),c}function p(e,t,n){e.webview.html=d(e.webview,t,n)}function d(e,t,n){const r=o.Uri.joinPath(t.extensionUri,"assets","public","styles.css"),a=o.Uri.joinPath(t.extensionUri,"assets","public","runtime.js"),s=o.Uri.joinPath(t.extensionUri,"assets","public","main.js");return`<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="utf-8" />\n    <title>VscodeUi</title>\n    <base href="/" />\n\n    <meta name="viewport" content="width=device-width, initial-scale=1" />\n\n    <script>\n      // At runtime, VSCode server will replace this empty schema with the one to render.\n      window.VSCODE_UI_SCHEMA = {};\n\n      window.addEventListener('message', event => {\n        const taskExecutionSchema = event.data.taskExecutionSchema;\n        if (taskExecutionSchema && window.SET_TASK_EXECUTION_SCHEMA) {\n          window.SET_TASK_EXECUTION_SCHEMA(taskExecutionSchema);\n        }\n      });\n\n      window.vscode = acquireVsCodeApi();\n    <\/script>\n    <link href="${e.asWebviewUri(r)}" rel="stylesheet"/>\n  </head>\n  <body>\n    <vscode-ui-task-execution-form></vscode-ui-task-execution-form>\n    <script src="${e.asWebviewUri(a)}"><\/script>\n    <script src="${e.asWebviewUri(s)}"><\/script>\n  </body>\n</html>`.replace("window.VSCODE_UI_SCHEMA = {};",`window.VSCODE_UI_SCHEMA = ${JSON.stringify(n)};`)}t.revealWebViewPanel=async function({context:e,cliTaskProvider:t,runTargetTreeItem:n,runTargetTreeView:r,contextMenuUri:o,generator:a}){const{label:i,generatorType:c}=n,p=await(0,s.getTaskExecutionSchema)(t,i,o,c,a);if(!p)return;const d=l(e,p,i,t);return e.subscriptions.push(d),d.onDidChangeViewState((e=>{e.webviewPanel.visible&&n.revealWorkspaceRoute(r)})),d},t.createWebViewPanel=l,t.getIframeHtml=d},55817:e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=55817,e.exports=t},99704:e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=99704,e.exports=t},3833:e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=3833,e.exports=t},54229:e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=54229,e.exports=t},13411:e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=13411,e.exports=t},38736:e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=38736,e.exports=t},61201:e=>{"use strict";e.exports=require("@yarnpkg/fslib")},16541:e=>{"use strict";e.exports=require("@yarnpkg/libzip")},79816:e=>{"use strict";e.exports=require("jsonc-parser")},89496:e=>{"use strict";e.exports=require("vscode")},39491:e=>{"use strict";e.exports=require("assert")},14300:e=>{"use strict";e.exports=require("buffer")},32081:e=>{"use strict";e.exports=require("child_process")},96206:e=>{"use strict";e.exports=require("console")},22057:e=>{"use strict";e.exports=require("constants")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},73292:e=>{"use strict";e.exports=require("fs/promises")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},31405:e=>{"use strict";e.exports=require("inspector")},98188:e=>{"use strict";e.exports=require("module")},41808:e=>{"use strict";e.exports=require("net")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},4074:e=>{"use strict";e.exports=require("perf_hooks")},63477:e=>{"use strict";e.exports=require("querystring")},14521:e=>{"use strict";e.exports=require("readline")},38102:e=>{"use strict";e.exports=require("repl")},12781:e=>{"use strict";e.exports=require("stream")},71576:e=>{"use strict";e.exports=require("string_decoder")},76224:e=>{"use strict";e.exports=require("tty")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},84655:e=>{"use strict";e.exports=require("v8")},26144:e=>{"use strict";e.exports=require("vm")},71267:e=>{"use strict";e.exports=require("worker_threads")},59796:e=>{"use strict";e.exports=require("zlib")}},o={};function a(e){var t=o[e];if(void 0!==t)return t.exports;var n=o[e]={id:e,loaded:!1,exports:{}};return r[e].call(n.exports,n,n.exports,a),n.loaded=!0,n.exports}a.m=r,a.c=o,a.x=()=>{var e=a.O(void 0,[260],(()=>a(a.s=69218)));return a.O(e)},e=[],a.O=(t,n,r,o)=>{if(!n){var s=1/0;for(p=0;p<e.length;p++){for(var[n,r,o]=e[p],i=!0,c=0;c<n.length;c++)(!1&o||s>=o)&&Object.keys(a.O).every((e=>a.O[e](n[c])))?n.splice(c--,1):(i=!1,o<s&&(s=o));if(i){e.splice(p--,1);var l=r();void 0!==l&&(t=l)}}return t}o=o||0;for(var p=e.length;p>0&&e[p-1][2]>o;p--)e[p]=e[p-1];e[p]=[n,r,o]},a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.f={},a.e=e=>Promise.all(Object.keys(a.f).reduce(((t,n)=>(a.f[n](e,t),t)),[])),a.u=e=>e+".js",a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),n={179:1},a.O.require=e=>n[e],a.f.require=(e,t)=>{n[e]||(e=>{var t=e.modules,r=e.ids,o=e.runtime;for(var s in t)a.o(t,s)&&(a.m[s]=t[s]);o&&o(a);for(var i=0;i<r.length;i++)n[r[i]]=1;a.O()})(require("./"+a.u(e)))},t=a.x,a.x=()=>(a.e(260),t());var s=a.x(),i=exports;for(var c in s)i[c]=s[c];s.__esModule&&Object.defineProperty(i,"__esModule",{value:!0})})();